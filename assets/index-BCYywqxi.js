const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-j5BZyfHq.js","assets/animation-CGUQWomD.js","assets/react-vendor-DRMccTfR.js","assets/icons-DbjOiOOr.js","assets/charts-DRda3aZS.js","assets/firebase-C-zsfMAV.js","assets/Profile-Bu6M-tkj.js","assets/Calendar-BprD0AbH.js"])))=>i.map(i=>d[i]);
import{j as e,m as l,A as R}from"./animation-CGUQWomD.js";import{a as Ue,r as x,g as We,R as Te,N as Je,L as Ke,O as Ye,H as Ze,b as Xe,d as te,e as et}from"./react-vendor-DRMccTfR.js";import{H as ge,P as tt,U as at,M as rt,B as ot,a as st,D as nt,b as Ce,c as it,d as lt,X as ye,C as fe,e as je,f as ke,g as ct,S as M,h as dt,i as we,j as ut,k as Ae,T as mt,l as pt,m as xt,n as ht,L as _e,o as gt,p as yt}from"./icons-DbjOiOOr.js";import{i as ft,g as bt,c as V,q as oe,w as le,a as se,T as $,b as be,d as A,s as L,e as P,f as vt,o as jt,h as wt}from"./firebase-C-zsfMAV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var he={},Ne=Ue;he.createRoot=Ne.createRoot,he.hydrateRoot=Ne.hydrateRoot;const Nt="modulepreload",Et=function(a){return"/daylo-app/"+a},Ee={},U=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),c=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(r.map(d=>{if(d=Et(d),d in Ee)return;Ee[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Nt,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((j,u)=>{y.addEventListener("load",j),y.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(n){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n}return o.then(n=>{for(const c of n||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},St={},Se=a=>{let t;const r=new Set,s=(g,y)=>{const j=typeof g=="function"?g(t):g;if(!Object.is(j,t)){const u=t;t=y??(typeof j!="object"||j===null)?j:Object.assign({},t,j),r.forEach(b=>b(t,u))}},o=()=>t,d={setState:s,getState:o,getInitialState:()=>p,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(St?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},p=t=a(s,o,d);return d},Dt=a=>a?Se(a):Se;var $e={exports:{}},Oe={},Fe={exports:{}},ze={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re=x;function It(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var Tt=typeof Object.is=="function"?Object.is:It,Ct=re.useState,kt=re.useEffect,At=re.useLayoutEffect,_t=re.useDebugValue;function $t(a,t){var r=t(),s=Ct({inst:{value:r,getSnapshot:t}}),o=s[0].inst,i=s[1];return At(function(){o.value=r,o.getSnapshot=t,pe(o)&&i({inst:o})},[a,r,t]),kt(function(){return pe(o)&&i({inst:o}),a(function(){pe(o)&&i({inst:o})})},[a]),_t(r),r}function pe(a){var t=a.getSnapshot;a=a.value;try{var r=t();return!Tt(a,r)}catch{return!0}}function Ot(a,t){return t()}var Ft=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ot:$t;ze.useSyncExternalStore=re.useSyncExternalStore!==void 0?re.useSyncExternalStore:Ft;Fe.exports=ze;var zt=Fe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me=x,Rt=zt;function Pt(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var qt=typeof Object.is=="function"?Object.is:Pt,Ht=Rt.useSyncExternalStore,Lt=me.useRef,Mt=me.useEffect,Qt=me.useMemo,Vt=me.useDebugValue;Oe.useSyncExternalStoreWithSelector=function(a,t,r,s,o){var i=Lt(null);if(i.current===null){var n={hasValue:!1,value:null};i.current=n}else n=i.current;i=Qt(function(){function d(u){if(!p){if(p=!0,g=u,u=s(u),o!==void 0&&n.hasValue){var b=n.value;if(o(b,u))return y=b}return y=u}if(b=y,qt(g,u))return b;var S=s(u);return o!==void 0&&o(b,S)?(g=u,b):(g=u,y=S)}var p=!1,g,y,j=r===void 0?null:r;return[function(){return d(t())},j===null?void 0:function(){return d(j())}]},[t,r,s,o]);var c=Ht(a,i[0],i[1]);return Mt(function(){n.hasValue=!0,n.value=c},[c]),Vt(c),c};$e.exports=Oe;var Gt=$e.exports;const Bt=We(Gt),Re={},{useDebugValue:Ut}=Te,{useSyncExternalStoreWithSelector:Wt}=Bt;let De=!1;const Jt=a=>a;function Kt(a,t=Jt,r){(Re?"production":void 0)!=="production"&&r&&!De&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),De=!0);const s=Wt(a.subscribe,a.getState,a.getServerState||a.getInitialState,t,r);return Ut(s),s}const Ie=a=>{(Re?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof a=="function"?Dt(a):a,r=(s,o)=>Kt(t,s,o);return Object.assign(r,t),r},Yt=a=>a?Ie(a):Ie,H=Yt((a,t)=>({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,isModalOpen:!1,hasCompletedCheckIn:!1,lastActiveDate:localStorage.getItem("daylo-last-active-date")||new Date().toISOString().split("T")[0],activityHistory:JSON.parse(localStorage.getItem("daylo-activity-history")||"[]"),timeHistory:JSON.parse(localStorage.getItem("daylo-time-history")||"[]"),addActivity:r=>{a(s=>{const o=[...s.selectedActivities,r],i=o.reduce((n,c)=>n+c.duration,0);return t().logActivity(r),t().logTime(r),{selectedActivities:o,totalMinutes:i,currentEntry:{...s.currentEntry,activities:o}}}),console.log("ðŸ’¾ Actividad agregada, guardando..."),setTimeout(()=>t().autoSave(),100)},restoreActivities:r=>{a(s=>{const o=r.reduce((i,n)=>i+n.duration,0);return{selectedActivities:r,totalMinutes:o,currentEntry:{...s.currentEntry,activities:r}}})},removeActivity:r=>{a(s=>{const o=s.selectedActivities.filter(n=>n.id!==r),i=o.reduce((n,c)=>n+c.duration,0);return{selectedActivities:o,totalMinutes:i,currentEntry:{...s.currentEntry,activities:o}}})},updateActivityDuration:(r,s)=>{a(o=>{const i=o.selectedActivities.map(c=>{if(c.id===r){const d={...c,duration:s};return t().logTime(d),d}return c}),n=i.reduce((c,d)=>c+d.duration,0);return{selectedActivities:i,totalMinutes:n,currentEntry:{...o.currentEntry,activities:i}}})},updateActivityFacets:(r,s,o)=>{a(i=>{const n=i.selectedActivities.map(c=>{if(c.id===r){const d={...c,facets:s,notes:o};return t().logActivity(d),d}return c});return{selectedActivities:n,currentEntry:{...i.currentEntry,activities:n}}})},updateActivityEnergy:(r,s)=>{a(o=>{const i=o.selectedActivities.map(n=>n.id===r?{...n,energyImpact:s}:n);return{selectedActivities:i,currentEntry:{...o.currentEntry,activities:i}}})},setReflection:r=>{a(s=>({currentEntry:{...s.currentEntry,reflection:{...s.currentEntry.reflection,...r}}}))},addTask:(r,s=!1,o=!1)=>{a(i=>{const n={id:Date.now().toString(),text:r,completed:!1,createdAt:new Date,isPriority:s,isPersonal:o},c=[...i.currentEntry.tasks||[],n];return{currentEntry:{...i.currentEntry,tasks:c}}}),console.log("ðŸ“ Tarea agregada, guardando..."),setTimeout(()=>t().autoSave(),100)},restoreTasks:r=>{a(s=>({currentEntry:{...s.currentEntry,tasks:r}}))},toggleTask:r=>{a(s=>{const o=(s.currentEntry.tasks||[]).map(i=>i.id===r?{...i,completed:!i.completed}:i);return{currentEntry:{...s.currentEntry,tasks:o}}}),setTimeout(()=>t().autoSave(),100)},removeTask:r=>{a(s=>{const o=(s.currentEntry.tasks||[]).filter(i=>i.id!==r);return{currentEntry:{...s.currentEntry,tasks:o}}})},setEmotionalCheckIn:r=>{a(s=>({currentEntry:{...s.currentEntry,emotionalCheckIn:r}}))},setDayIntention:r=>{a(s=>({currentEntry:{...s.currentEntry,dayIntention:r}}))},setDayStory:r=>{a(s=>({currentEntry:{...s.currentEntry,dayStory:r}}))},completeCheckIn:()=>{a({hasCompletedCheckIn:!0});const r=new Date().toISOString().split("T")[0];localStorage.setItem("daylo-last-checkin",r)},setDiaryNote:r=>{a(s=>({currentEntry:{...s.currentEntry,diaryNote:r}})),setTimeout(()=>t().autoSave(),500)},saveEntry:()=>{const s={...t().currentEntry,id:Date.now().toString(),date:new Date},o=JSON.parse(localStorage.getItem("daylo-entries")||"[]");o.push(s),localStorage.setItem("daylo-entries",JSON.stringify(o)),t().resetEntry()},resetEntry:()=>{const r=new Date().toISOString().split("T")[0];a({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,hasCompletedCheckIn:!1,lastActiveDate:r}),localStorage.setItem("daylo-last-active-date",r),localStorage.removeItem("daylo-last-checkin")},checkAndResetIfNewDay:()=>{const r=t(),s=new Date().toISOString().split("T")[0];return(r.lastActiveDate||s)!==s?(console.log("ðŸŒ… Nuevo dÃ­a detectado - reseteando datos"),t().resetEntry(),!0):!1},autoSave:async()=>{var c,d,p,g,y,j;const r=t(),s=new Date().toISOString().split("T")[0];a({lastActiveDate:s}),localStorage.setItem("daylo-last-active-date",s);const o={id:r.currentEntry.id||Date.now().toString(),date:new Date,activities:r.selectedActivities,tasks:r.currentEntry.tasks||[],diaryNote:r.currentEntry.diaryNote||"",emotionalCheckIn:r.currentEntry.emotionalCheckIn,dayIntention:r.currentEntry.dayIntention,dayStory:r.currentEntry.dayStory,reflection:r.currentEntry.reflection},i=JSON.parse(localStorage.getItem("daylo-entries")||"[]"),n=i.findIndex(u=>new Date(u.date).toISOString().split("T")[0]===s);n>=0?i[n]=o:i.push(o),localStorage.setItem("daylo-entries",JSON.stringify(i));try{if(!localStorage.getItem("daylo-user-email")){console.warn("âš ï¸ No hay email de usuario - saltando guardado en Firebase"),console.log("ðŸ’¾ Datos guardados solo en localStorage");return}console.log("ðŸ“¤ Guardando en Firebase con arquitectura especializada...");const{saveUserObjectives:b,saveDailyEmotion:S,saveDailyIntention:v,saveDailyActivities:O,saveTasks:f,saveDiaryNote:D,saveDayStory:z}=await U(async()=>{const{saveUserObjectives:I,saveDailyEmotion:m,saveDailyIntention:C,saveDailyActivities:B,saveTasks:J,saveDiaryNote:K,saveDayStory:Y}=await Promise.resolve().then(()=>xe);return{saveUserObjectives:I,saveDailyEmotion:m,saveDailyIntention:C,saveDailyActivities:B,saveTasks:J,saveDiaryNote:K,saveDayStory:Y}},void 0),k=[];if((c=r.currentEntry.emotionalCheckIn)!=null&&c.currentGoal&&((d=r.currentEntry.emotionalCheckIn)!=null&&d.futureVision)&&((p=r.currentEntry.emotionalCheckIn)!=null&&p.mainObstacle)&&k.push(b({currentGoal:r.currentEntry.emotionalCheckIn.currentGoal,futureVision:r.currentEntry.emotionalCheckIn.futureVision,mainObstacle:r.currentEntry.emotionalCheckIn.mainObstacle}).catch(I=>console.error("âŒ Error guardando objetivos:",I))),(g=r.currentEntry.emotionalCheckIn)!=null&&g.feeling){const I=!!r.currentEntry.emotionalCheckIn.currentGoal;k.push(S({feeling:r.currentEntry.emotionalCheckIn.feeling,shareThoughts:r.currentEntry.emotionalCheckIn.shareThoughts,actionIntention:r.currentEntry.emotionalCheckIn.actionIntention,isNewUser:I}).catch(m=>console.error("âŒ Error guardando emociÃ³n:",m)))}if((y=r.currentEntry.emotionalCheckIn)!=null&&y.actionIntention){const I=["Ansioso/a","Cansado/a","Abrumado/a"].includes(r.currentEntry.emotionalCheckIn.feeling||"");k.push(v({intention:r.currentEntry.emotionalCheckIn.actionIntention,feelingContext:r.currentEntry.emotionalCheckIn.feeling||"",isNegativeEmotion:I,shareThoughts:r.currentEntry.emotionalCheckIn.shareThoughts}).catch(m=>console.error("âŒ Error guardando intenciÃ³n:",m)))}r.selectedActivities.length>0&&k.push(O(r.selectedActivities).catch(I=>console.error("âŒ Error guardando actividades:",I))),r.currentEntry.tasks&&r.currentEntry.tasks.length>0&&k.push(f(r.currentEntry.tasks).catch(I=>console.error("âŒ Error guardando tareas:",I))),r.currentEntry.diaryNote&&r.currentEntry.diaryNote.trim()&&k.push(D(r.currentEntry.diaryNote).catch(I=>console.error("âŒ Error guardando nota:",I))),(j=r.currentEntry.dayStory)!=null&&j.mostSignificant&&k.push(z(r.currentEntry.dayStory).catch(I=>console.error("âŒ Error guardando historia del dÃ­a:",I))),await Promise.all(k),console.log("âœ… Auto-guardado completo en Firebase (arquitectura especializada)")}catch(u){console.error("âš ï¸ Error auto-guardando en Firebase (datos seguros en local):",u)}},setModalOpen:r=>{a({isModalOpen:r})},logActivity:r=>{const s={id:Date.now().toString(),activityIcon:r.icon,activityLabel:r.label,duration:r.duration,facets:r.facets,notes:r.notes,energyImpact:r.energyImpact,timestamp:new Date,date:new Date().toISOString().split("T")[0]};a(o=>{const i=[...o.activityHistory,s];return localStorage.setItem("daylo-activity-history",JSON.stringify(i)),U(async()=>{const{saveActivityLog:n}=await Promise.resolve().then(()=>xe);return{saveActivityLog:n}},void 0).then(({saveActivityLog:n})=>{n(s).catch(c=>console.error("Error guardando activity log en Firebase:",c))}),{activityHistory:i}})},logTime:r=>{const s={id:Date.now().toString(),activityIcon:r.icon,activityLabel:r.label,duration:r.duration,timestamp:new Date,date:new Date().toISOString().split("T")[0]};a(o=>{const i=[...o.timeHistory,s];return localStorage.setItem("daylo-time-history",JSON.stringify(i)),U(async()=>{const{saveTimeLog:n}=await Promise.resolve().then(()=>xe);return{saveTimeLog:n}},void 0).then(({saveTimeLog:n})=>{n(s).catch(c=>console.error("Error guardando time log en Firebase:",c))}),{timeHistory:i}})},getActivityHistory:(r=30)=>{const s=t(),o=new Date;return o.setDate(o.getDate()-r),s.activityHistory.filter(i=>new Date(i.date)>=o)},getTimeHistory:(r=30)=>{const s=t(),o=new Date;return o.setDate(o.getDate()-r),s.timeHistory.filter(i=>new Date(i.date)>=o)},resetStore:()=>{a({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,isModalOpen:!1,hasCompletedCheckIn:!1,lastActiveDate:new Date().toISOString().split("T")[0],activityHistory:[],timeHistory:[]}),localStorage.removeItem("daylo-last-active-date"),localStorage.removeItem("daylo-last-checkin"),console.log("ðŸ”„ Store reseteado por logout")}})),Zt=Object.freeze(Object.defineProperty({__proto__:null,useDayloStore:H},Symbol.toStringTag,{value:"Module"})),Xt=[{id:"work",label:"Productividad",color:"#C4E5FF",defaultDuration:360},{id:"study",label:"Estudio",color:"#E8D4FF",defaultDuration:240},{id:"home",label:"Hogar",color:"#FFD4E5",defaultDuration:180},{id:"exercise",label:"Ejercicio",color:"#D4FFE5",defaultDuration:60},{id:"social",label:"Social",color:"#FFE5D4",defaultDuration:120},{id:"hobbies",label:"Hobbies",color:"#FFF4D4",defaultDuration:90},{id:"food",label:"Comida",color:"#FFE5D4",defaultDuration:90},{id:"sleep",label:"Descanso",color:"#E8D4FF",defaultDuration:480},{id:"health",label:"Salud",color:"#D4FFE5",defaultDuration:60}],ea={work:[{id:"progress",label:"Â¿Avanzaste en algo importante?",type:"boolean"},{id:"control",label:"Â¿Te sentiste en control?",type:"boolean"},{id:"work_value",label:"Â¿Valor de lo realizado?",type:"rating"}],study:[{id:"learned_new",label:"Â¿Aprendiste algo nuevo?",type:"boolean"},{id:"can_explain",label:"Â¿PodrÃ­as explicarlo?",type:"boolean"},{id:"usefulness",label:"Â¿QuÃ© tan Ãºtil fue?",type:"rating"}],home:[{id:"space_better",label:"Â¿Tu espacio estÃ¡ mejor?",type:"boolean"},{id:"did_necessary",label:"Â¿Hiciste lo necesario?",type:"boolean"},{id:"how_feel",label:"Â¿CÃ³mo te sientes ahora?",type:"rating"}],exercise:[{id:"healthy_challenge",label:"Â¿Te desafiaste sanamente?",type:"boolean"},{id:"pain_discomfort",label:"Â¿Dolor o molestia?",type:"boolean"},{id:"enjoyed",label:"Â¿Disfrutaste la actividad?",type:"boolean"}],social:[{id:"authentic",label:"Â¿ConversaciÃ³n autÃ©ntica?",type:"boolean"},{id:"emotional_impact",label:"Â¿Impacto emocional?",type:"rating"},{id:"added_value",label:"Â¿AgregÃ³ valor a tu dÃ­a?",type:"boolean"}],hobbies:[{id:"lost_track_time",label:"Â¿Perdiste nociÃ³n del tiempo?",type:"boolean"},{id:"enjoyed_process",label:"Â¿Disfrutaste el proceso?",type:"boolean"},{id:"recharged",label:"Â¿Te recargÃ³ energÃ­a?",type:"boolean"}],food:[{id:"nourished_well",label:"Â¿Te nutriste bien?",type:"boolean"},{id:"taste_quality",label:"Â¿Sabor y presentaciÃ³n?",type:"rating"},{id:"listened_body",label:"Â¿Escuchaste tu cuerpo?",type:"boolean"}],sleep:[{id:"hours_amount",label:"Â¿Cantidad de horas?",type:"rating"},{id:"slept_deeply",label:"Â¿Dormiste profundamente?",type:"boolean"},{id:"ready_for_day",label:"Â¿Listo para el dÃ­a?",type:"boolean"}],health:[{id:"physical_feeling",label:"Â¿CÃ³mo te sientes fÃ­sicamente?",type:"rating"},{id:"health_stable",label:"Â¿Tu salud estÃ¡ estable?",type:"boolean"},{id:"did_something",label:"Â¿Hiciste algo por tu salud?",type:"boolean"}]},ta=a=>{const r=[...ea[a]||[]];for(let s=r.length-1;s>0;s--){const o=Math.floor(Math.random()*(s+1));[r[s],r[o]]=[r[o],r[s]]}return r},de=a=>{const t=Math.floor(a/60),r=a%60;return t===0?`${r}m`:r===0?`${t}h`:`${t}h ${r}m`},aa={work:it,home:Ce,exercise:nt,social:st,study:ot,sleep:rt,food:at,hobbies:tt,health:ge};function ra({type:a,size:t=32,animate:r=!1,color:s="#667085"}){const o=aa[a];return e.jsx(l.div,{initial:r?{scale:0,rotate:-180}:{},animate:r?{scale:1,rotate:0,transition:{type:"spring",stiffness:260,damping:20}}:{},whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},children:e.jsx(o,{size:t,color:s,strokeWidth:1.5})})}function oa({activity:a,isSelected:t,onToggle:r}){const[s,o]=x.useState(!1);return e.jsxs(l.button,{onClick:r,onTapStart:()=>o(!0),onTap:()=>o(!1),onTapCancel:()=>o(!1),className:`daylo-icon-card w-full aspect-square ${t?"selected":""}`,style:{backgroundColor:t?a.color:`${a.color}40`,borderColor:a.color},whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{boxShadow:[`0 0 0 0 ${a.color}40`,`0 0 0 8px ${a.color}00`]}:{},transition:{duration:.3},children:[e.jsx(l.div,{animate:t?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},transition:{duration:.5},children:e.jsx(ra,{type:a.id,size:40,animate:s,color:t?"#374151":"#6B7280"})}),e.jsx("span",{className:"text-sm font-semibold mt-2 text-gray-700",children:a.label}),t&&e.jsx(l.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg",children:"âœ“"})]})}function sa({label:a,value:t,onChange:r,min:s=0,max:o=720,step:i=15,color:n="#C4E5FF",icon:c}){const[d,p]=x.useState(!1),[g,y]=x.useState(!1),[j,u]=x.useState(!0),b=(t-s)/(o-s)*100;x.useEffect(()=>{const f=setTimeout(()=>u(!1),5e3);return()=>clearTimeout(f)},[]);const S=f=>{r(f),g||(y(!0),u(!1))},v=()=>{p(!0),u(!1),y(!0)},O=()=>{p(!1)};return e.jsxs(l.div,{className:"w-full space-y-3 relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx("div",{className:"text-gray-600",children:c}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:a}),e.jsx(R,{children:j&&!g&&e.jsxs(l.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex items-center gap-1 mt-1",children:[e.jsx(lt,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"text-[10px] text-purple-600 font-medium",children:"Desliza para ajustar"})]})})]})]}),e.jsx(l.div,{className:"flex items-center gap-2",animate:d?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:e.jsx(l.span,{className:"text-2xl font-black bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",animate:d?{scale:[1,1.15,1]}:{},children:de(t)})})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative h-8 bg-gradient-to-r from-gray-100 via-gray-200 to-gray-100 rounded-full overflow-visible shadow-inner",children:[Array.from({length:Math.floor(o/180)+1}).map((f,D)=>{const z=D*3,k=z*60/o*100;return k>100?null:e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-300 opacity-60",style:{left:`${k}%`},children:e.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-[9px] text-gray-400 font-medium",children:[z,"h"]})},D)}),e.jsx(l.div,{className:"absolute top-0 bottom-0 left-0 rounded-full shadow-md",style:{width:`${b}%`,background:`linear-gradient(90deg, ${n}, ${n}dd)`},initial:!1,animate:{width:`${b}%`},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 rounded-full",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),e.jsx("input",{type:"range",min:s,max:o,step:i,value:t,onChange:f=>S(Number(f.target.value)),onMouseDown:v,onMouseUp:O,onTouchStart:v,onTouchEnd:O,className:"absolute w-full h-full opacity-0 cursor-grab active:cursor-grabbing z-10",style:{margin:0}}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 pointer-events-none z-20",style:{left:`${b}%`,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"relative w-6 h-6 rounded-full shadow-lg border-2 border-white",style:{backgroundColor:n}})})]})}),e.jsxs("div",{className:"flex justify-between text-xs font-medium px-1",children:[e.jsx("span",{className:"text-gray-500",children:de(s)}),e.jsx("span",{className:"text-gray-400",children:de(o/2)}),e.jsx("span",{className:"text-gray-500",children:de(o)})]}),d&&e.jsx(l.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-center",children:e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"ðŸ‘ Ajustando tiempo..."})})]})}function na({isOpen:a,onClose:t,children:r,color:s,title:o}){return e.jsx(R,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40"}),e.jsx(l.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-x-0 bottom-0 z-50 flex flex-col max-h-[85vh]",children:e.jsxs("div",{className:"bg-white rounded-t-3xl shadow-2xl flex flex-col overflow-hidden",style:{borderTopColor:s,borderTopWidth:"4px",height:"100%"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between px-6 pb-4 border-b border-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:o}),e.jsx(l.button,{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(ye,{size:24,className:"text-gray-600"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1 pb-32 overscroll-contain",children:r})]})})]})})}function ia({emoji:a,label:t,value:r,onChange:s,color:o}){const i=[1,2,3,4,5];return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a&&e.jsx("span",{className:"text-3xl",children:a}),e.jsx("h3",{className:"text-base font-semibold text-gray-700 flex-1",children:t})]}),e.jsx("div",{className:"flex justify-between gap-2",children:i.map(n=>e.jsx(l.button,{onClick:()=>s(n),className:`w-full py-3 rounded-xl font-bold text-lg transition-all ${r===n?"shadow-lg scale-105":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,style:{backgroundColor:r===n?o:void 0,color:r===n?"#374151":void 0},whileHover:{scale:r===n?1.05:1.02},whileTap:{scale:.95},children:n},n))}),e.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Bajo"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Alto"})]})]})}function la({emoji:a,label:t,value:r,onChange:s,color:o}){return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a&&e.jsx("span",{className:"text-3xl",children:a}),e.jsx("h3",{className:"text-base font-semibold text-gray-700 flex-1",children:t})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l.button,{onClick:()=>s(!0),className:`flex-1 py-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${r===!0?"shadow-lg scale-105":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,style:{backgroundColor:r===!0?o:void 0,color:r===!0?"#374151":void 0},whileHover:{scale:r===!0?1.05:1.02},whileTap:{scale:.95},children:[e.jsx(fe,{size:20,strokeWidth:3}),"SÃ­"]}),e.jsxs(l.button,{onClick:()=>s(!1),className:`flex-1 py-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${r===!1?"bg-gray-300 text-gray-700 shadow-lg scale-105":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,whileHover:{scale:r===!1?1.05:1.02},whileTap:{scale:.95},children:[e.jsx(ye,{size:20,strokeWidth:3}),"No"]})]})]})}function ca(){const[a,t]=x.useState(""),[r,s]=x.useState(""),[o,i]=x.useState(!1),[n,c]=x.useState(null),{currentEntry:d,addTask:p,toggleTask:g,removeTask:y,autoSave:j}=H(),u=d.tasks||[],b=u.filter(m=>m.isPriority&&!m.isPersonal),S=u.find(m=>m.isPersonal),v=async m=>{if(m.preventDefault(),a.trim()&&!o){i(!0);try{const C=b.length<3;p(a.trim(),C,!1),t(""),await new Promise(B=>setTimeout(B,100)),await j(),console.log("âœ… Tarea agregada y guardada")}catch(C){console.error("âŒ Error guardando tarea:",C)}finally{i(!1)}}},O=async m=>{if(m.preventDefault(),r.trim()&&!S&&!o){i(!0);try{p(r.trim(),!1,!0),s(""),await new Promise(C=>setTimeout(C,100)),await j(),console.log("âœ… AcciÃ³n personal agregada y guardada")}catch(C){console.error("âŒ Error guardando acciÃ³n:",C)}finally{i(!1)}}},f=async m=>{if(!n){c(m);try{g(m),await new Promise(C=>setTimeout(C,100)),await j(),console.log("âœ… Tarea marcada y guardada")}catch(C){console.error("âŒ Error guardando cambio de tarea:",C)}finally{c(null)}}},D=async m=>{if(!n){c(m);try{y(m),await new Promise(C=>setTimeout(C,100)),await j(),console.log("âœ… Tarea eliminada y guardada")}catch(C){console.error("âŒ Error eliminando tarea:",C)}finally{c(null)}}},z=u.filter(m=>m.completed).length,k=b.length<3,I=m=>e.jsxs(l.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,x:-100},className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${m.completed?"bg-green-50 border-green-200":m.isPriority?"bg-purple-50 border-purple-200 hover:border-purple-300":m.isPersonal?"bg-pink-50 border-pink-200 hover:border-pink-300":"bg-gray-50 border-gray-200 hover:border-purple-300"}`,children:[e.jsx("button",{onClick:()=>f(m.id),disabled:n===m.id,className:`flex-shrink-0 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all relative ${m.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-purple-400"} ${n===m.id?"opacity-70 cursor-not-allowed":""}`,children:n===m.id?e.jsx(l.div,{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}):m.completed?e.jsx(l.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:e.jsx(fe,{className:"w-4 h-4 text-white",strokeWidth:3})}):null}),e.jsx("span",{className:`flex-1 text-sm ${m.completed?"line-through text-gray-400":"text-gray-700 font-medium"}`,children:m.text}),e.jsx("button",{onClick:()=>D(m.id),disabled:n===m.id,className:`flex-shrink-0 w-6 h-6 rounded-lg hover:bg-red-100 flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors ${n===m.id?"opacity-50 cursor-not-allowed":""}`,children:e.jsx(ye,{className:"w-4 h-4"})})]},m.id);return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:"ðŸŽ¯ MÃ¡ximo 3 prioridades"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Menos es mÃ¡s. EnfÃ³cate en lo que realmente importa"})]}),b.length>=3&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-lg font-medium",children:"Completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{mode:"popLayout",children:b.map(I)}),b.length===0&&e.jsx("div",{className:"text-center py-6 border-2 border-dashed border-purple-200 rounded-xl bg-purple-50/30",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Â¿QuÃ© 3 cosas moverÃ­an la aguja hoy?"})})]}),k&&e.jsxs("form",{onSubmit:v,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:m=>t(m.target.value),placeholder:`Prioridad ${b.length+1}...`,className:"flex-1 px-3 py-2.5 rounded-xl border-2 border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm bg-purple-50/30",maxLength:100}),e.jsx("button",{type:"submit",disabled:!a.trim(),className:"px-3 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[44px]",children:e.jsx(je,{className:"w-5 h-5"})})]}),!k&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 bg-purple-50 rounded-xl border border-purple-200",children:e.jsx("p",{className:"text-xs text-purple-700 text-center",children:"âœ¨ Perfecto. MÃ¡s de 3 prioridades reduce tu probabilidad de completarlas en 50%"})})]}),e.jsxs("div",{className:"space-y-3 border-t-2 border-gray-100 pt-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:"ðŸ’š 1 AcciÃ³n para ti"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:'Algo que cuide tu bienestar, aunque "no sea productivo"'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{mode:"popLayout",children:S&&I(S)}),!S&&e.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-pink-200 rounded-xl bg-pink-50/30",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Â¿QuÃ© te harÃ­a bien hoy?"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Caminar, descansar, llamar a alguien..."})]})]}),!S&&e.jsxs("form",{onSubmit:O,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:m=>s(m.target.value),placeholder:"Ej: Caminar 10 min, desconectar...",className:"flex-1 px-3 py-2.5 rounded-xl border-2 border-pink-200 focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm bg-pink-50/30",maxLength:100}),e.jsx("button",{type:"submit",disabled:!r.trim(),className:"px-3 py-2.5 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[44px]",children:e.jsx(je,{className:"w-5 h-5"})})]})]}),u.length>0&&z===u.length&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:e.jsx("p",{className:"text-sm text-green-700 font-medium text-center",children:"ðŸŽ‰ Â¡Completaste todas tus tareas! Â¡Excelente trabajo!"})})]})}function da({timeContext:a}){const{currentEntry:t,setDiaryNote:r,autoSave:s}=H(),o=t.diaryNote||"",[i,n]=x.useState(!1),[c,d]=x.useState(!1),[p,g]=x.useState(!1);x.useEffect(()=>{if(o){const v=setTimeout(()=>{s()},1e3);return()=>clearTimeout(v)}},[o,s]);const y=async()=>{d(!0);try{await s(),g(!0),setTimeout(()=>g(!1),2e3)}catch(v){console.error("Error guardando nota:",v)}finally{d(!1)}},u=a==="morning"?{title:"Notas para hoy",placeholder:`Anota lo que quieras: ideas, intenciones, cÃ³mo te sientes, recordatorios...

Este es tu espacio libre para escribir lo que necesites.`,emoji:"âœ¨"}:a==="afternoon"?{title:"Notas del dÃ­a",placeholder:`Escribe lo que quieras: pensamientos, ideas, algo que pasÃ³, cÃ³mo te sientes...

Sin lÃ­mites, sin filtros. Tu espacio personal.`,emoji:"ðŸ’­"}:{title:"Notas del dÃ­a",placeholder:`AquÃ­ puedes escribir lo que quieras: reflexiones, versos, ideas sueltas, lo que viviste...

Tu espacio seguro para expresarte.`,emoji:"ðŸ“–"},b=o.length,S=1e3;return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border-2 border-purple-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>n(!i),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-purple-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:u.title}),e.jsx("p",{className:"text-sm text-purple-600",children:o?`${o.split(/\s+/).filter(v=>v.length>0).length} palabras escritas`:"Tu espacio personal"})]})]}),e.jsx(l.div,{animate:{rotate:i?180:0},transition:{duration:.3},children:e.jsx(ct,{className:"w-6 h-6 text-purple-500"})})]}),e.jsx(R,{children:i&&e.jsx(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t-2 border-purple-100",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50/50 to-pink-50/50",children:[!o&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 p-3 bg-white/80 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-purple-700",children:[a==="morning"&&"Comenzar el dÃ­a escribiendo tus pensamientos te ayuda a tener claridad mental",a==="afternoon"&&"Tomarte un momento para reflexionar puede cambiar el rumbo de tu dÃ­a",a==="evening"&&"Escribir antes de dormir te ayuda a procesar el dÃ­a y descansar mejor"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:o,onChange:v=>r(v.target.value),placeholder:u.placeholder,maxLength:S,className:"w-full h-56 p-4 rounded-xl border-2 border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm text-gray-700 placeholder:text-gray-400 bg-white",style:{lineHeight:"1.6"}}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white px-2 py-1 rounded-lg",children:[b,"/",S]})]}),o&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 flex justify-between text-xs text-purple-600 px-2",children:[e.jsxs("span",{children:[o.split(/\s+/).filter(v=>v.length>0).length," palabras"]}),e.jsxs("span",{children:[o.split(`
`).length," lÃ­neas"]})]}),e.jsx(l.button,{onClick:y,disabled:c||!o,className:`mt-4 w-full py-3 rounded-xl font-semibold text-sm transition-all flex items-center justify-center gap-2 ${p?"bg-green-500 text-white":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"}`,whileHover:!c&&o?{scale:1.02}:{},whileTap:!c&&o?{scale:.98}:{},children:p?e.jsxs(e.Fragment,{children:[e.jsx(fe,{size:18}),e.jsx("span",{children:"Â¡Guardado!"})]}):c?e.jsxs(e.Fragment,{children:[e.jsx(l.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{size:18}),e.jsx("span",{children:"Guardar Notas"})]})})]})})})]})}const ue=[{emoji:"ðŸ˜Š",label:"Bien",color:"#D4FFE5"},{emoji:"ðŸ˜°",label:"Ansioso/a",color:"#FFE5D4"},{emoji:"ðŸ˜´",label:"Cansado/a",color:"#E8D4FF"},{emoji:"ðŸ˜¤",label:"Abrumado/a",color:"#FFD4E5"},{emoji:"ðŸ¤—",label:"Motivado/a",color:"#FFF4D4"},{emoji:"ðŸ˜",label:"Neutral",color:"#E8E8E8"}],ua=["Ansioso/a","Cansado/a","Abrumado/a"],ae={"Ansioso/a":{encouragement:"Respira. Un paso a la vez. Hoy puedes enfocarte en lo que SÃ controlas.",actionQuestion:"Â¿QuÃ© PEQUEÃ‘O paso te ayudarÃ­a a sentirte mejor?",placeholder:"Ej: Hacer una lista, hablar con alguien, salir a caminar 10 minutos..."},"Cansado/a":{encouragement:"Tu cuerpo te estÃ¡ pidiendo algo. Hoy puedes ir a tu ritmo, sin culpa.",actionQuestion:"Â¿QuÃ© necesitas priorizar para cuidar tu energÃ­a?",placeholder:"Ej: Dormir temprano, delegar tareas, decir no a algo, tomar pausas..."},"Abrumado/a":{encouragement:"EstÃ¡ bien hacer menos. Â¿QuÃ© es lo MÃS importante hoy?",actionQuestion:"Si solo pudieras hacer UNA cosa hoy, Â¿cuÃ¡l serÃ­a?",placeholder:"Ej: Terminar ese proyecto, hablar con mi jefe, descansar sin culpa..."},Bien:{encouragement:"âœ¨ Â¡Aprovecha esta energÃ­a! Â¿En quÃ© quieres enfocarla hoy?",actionQuestion:"Â¿QuÃ© quieres lograr o cÃ³mo quieres sentirte al final del dÃ­a?",placeholder:"Ej: Avanzar en mis proyectos, conectar con otros, mantener este equilibrio..."},"Motivado/a":{encouragement:"ðŸ”¥ Ese impulso es oro. Â¿QuÃ© quieres lograr hoy?",actionQuestion:"Â¿En quÃ© vas a canalizar esta motivaciÃ³n?",placeholder:"Ej: Empezar ese proyecto, aprender algo nuevo, hacer ejercicio, crear..."},Neutral:{encouragement:"Un dÃ­a equilibrado es un buen punto de partida. Â¿CÃ³mo quieres sentirte al cerrarlo?",actionQuestion:"Â¿QuÃ© le darÃ­a sentido a tu dÃ­a de hoy?",placeholder:"Ej: Completar tareas pendientes, tener un momento para mÃ­, conectar con alguien..."}},Q=[{key:"currentGoal",emoji:"ðŸŽ¯",question:"Â¿QuÃ© quieres cambiar o lograr ahora mismo en tu vida?",placeholder:"Ej: Mejorar mi salud, cambiar de trabajo, fortalecer mis relaciones..."},{key:"futureVision",emoji:"âœ¨",question:"Â¿CÃ³mo quieres que sea tu vida en los prÃ³ximos aÃ±os?",placeholder:"Ej: Ser mÃ¡s independiente, tener un mejor equilibrio, sentirme realizado/a..."},{key:"mainObstacle",emoji:"ðŸš§",question:"Â¿QuÃ© es lo que mÃ¡s te frena hoy?",placeholder:"Ej: La falta de tiempo, el miedo, la incertidumbre, la procrastinaciÃ³n..."}];function ma({onComplete:a,isNewUser:t=!1}){var J,K,Y,Z,ce,ne,q,ie,G;const{setEmotionalCheckIn:r,autoSave:s}=H(),[o,i]=x.useState(1),[n,c]=x.useState(""),[d,p]=x.useState(""),[g,y]=x.useState(""),[j,u]=x.useState(""),[b,S]=x.useState(""),[v,O]=x.useState(""),f=ua.includes(n),D=t?4:f?3:2,z=async()=>{if(o===1&&n){r({feeling:n});const w=localStorage.getItem("daylo-user-email");console.log("ðŸ“§ Email usuario:",w),await s(),console.log("âœ… Paso 1 guardado - EmociÃ³n:",n),i(2)}else if(o===2&&t&&d.trim())r({feeling:n,currentGoal:d.trim()}),await s(),console.log("âœ… Paso 2 guardado - Objetivo actual:",d),i(3);else if(o===3&&t&&g.trim())r({feeling:n,currentGoal:d.trim(),futureVision:g.trim()}),await s(),console.log("âœ… Paso 3 guardado - VisiÃ³n futura:",g),i(4);else if(o===4&&t&&j.trim()){const w={feeling:n,currentGoal:d.trim()||void 0,futureVision:g.trim()||void 0,mainObstacle:j.trim()};r(w),await s(),console.log("âœ… Check-in completo guardado (usuario nuevo):",w),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),a()}else o===2&&!t&&!f&&v.trim()?(r({feeling:n,actionIntention:v.trim()}),await s(),console.log("âœ… Check-in completo (positivo):",{feeling:n,actionIntention:v}),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),a()):o===2&&!t&&f?(r({feeling:n,shareThoughts:b.trim()||void 0}),await s(),console.log("âœ… Paso 2 guardado (negativo):",{feeling:n,shareThoughts:b}),i(3)):o===3&&!t&&f&&v.trim()&&(r({feeling:n,shareThoughts:b.trim()||void 0,actionIntention:v.trim()}),await s(),console.log("âœ… Check-in completo (negativo):",{feeling:n,shareThoughts:b,actionIntention:v}),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),a())},k=n!=="",I=t?d.trim()!=="":f?!0:v.trim()!=="",m=t?g.trim()!=="":v.trim()!=="",C=j.trim()!=="",B=()=>o===1?"ðŸ’­ Hola, bienvenido/a":o===2&&!t&&f?"ðŸ’­ Quieres compartir algo?":o===2&&!t&&!f?"âœ¨ Tu intenciÃ³n de hoy":o===3&&!t?"ðŸŽ¯ Tu intenciÃ³n de hoy":o===2&&t?"ðŸŽ¯ Tu objetivo actual":o===3&&t?"âœ¨ Tu visiÃ³n futura":o===4&&t?"ðŸš§ Tus obstÃ¡culos":"";return e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-purple-100/90 to-pink-100/90 backdrop-blur-md z-50 flex items-center justify-center p-4 pb-24",children:e.jsxs(l.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[85vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 bg-white border-b border-purple-100 px-6 py-4 rounded-t-3xl",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl flex items-center justify-center",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:B()}),e.jsxs("p",{className:"text-xs text-purple-600",children:["Paso ",o," de ",D]})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs(R,{mode:"wait",children:[o===1&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:t?"Reconocer tus emociones es el primer paso para vivir con mÃ¡s conciencia":"Tomarte un momento para reconocer cÃ³mo te sientes te ayuda a regular tus emociones"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:"ðŸ’­ Â¿CÃ³mo te sientes ahora mismo?"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ue.map(w=>e.jsxs(l.button,{onClick:()=>c(w.label),className:`p-3 rounded-xl border-2 transition-all ${n===w.label?"border-purple-400 shadow-md scale-105":"border-gray-200 hover:border-purple-300"}`,style:{backgroundColor:n===w.label?w.color:"white"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("div",{className:"text-2xl mb-1",children:w.emoji}),e.jsx("div",{className:"text-xs font-medium text-gray-700",children:w.label})]},w.label))})]})]},"step1"),o===2&&t&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(J=ue.find(w=>w.label===n))==null?void 0:J.emoji," ",n]})]}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Definir claramente lo que quieres cambiar es el primer paso hacia la transformaciÃ³n"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[Q[0].emoji," ",Q[0].question]}),e.jsx("textarea",{value:d,onChange:w=>p(w.target.value),placeholder:Q[0].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ SÃ© honesto/a contigo mismo/a, esto nos ayuda a guiarte mejor"})]})]},"step2-new-user"),o===3&&t&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Quieres cambiar/lograr:"}),e.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:d})]})})}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Visualizar tu futuro ideal te ayuda a tomar mejores decisiones en el presente"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[Q[1].emoji," ",Q[1].question]}),e.jsx("textarea",{value:g,onChange:w=>y(w.target.value),placeholder:Q[1].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ No hay respuestas correctas o incorrectas, solo tu visiÃ³n"})]})]},"step3-new-user"),o===4&&t&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Tu visiÃ³n futura:"}),e.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:g})]})})}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Reconocer lo que te frena es el primer paso para superarlo"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[Q[2].emoji," ",Q[2].question]}),e.jsx("textarea",{value:j,onChange:w=>u(w.target.value),placeholder:Q[2].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Identificar obstÃ¡culos es clave para trabajar en ellos"})]})]},"step4-new-user"),o===2&&!t&&f&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(K=ue.find(w=>w.label===n))==null?void 0:K.emoji," ",n]})]}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"A veces expresar lo que sentimos nos ayuda a procesarlo mejor"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:"ðŸ’­ Â¿Hay algo que quieras compartir?"}),e.jsx("textarea",{value:b,onChange:w=>S(w.target.value),placeholder:"Opcional: Escribe lo que sientas, sin presiÃ³n...",className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Este campo es completamente opcional, puedes continuar sin escribir nada"})]})]},"step2-existing-negative"),o===2&&!t&&!f&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(Y=ue.find(w=>w.label===n))==null?void 0:Y.emoji," ",n]})]}),e.jsx(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-base font-semibold text-purple-800",children:(Z=ae[n])==null?void 0:Z.encouragement})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:["ðŸŽ¯ ",(ce=ae[n])==null?void 0:ce.actionQuestion]}),e.jsx("textarea",{value:v,onChange:w=>O(w.target.value),placeholder:(ne=ae[n])==null?void 0:ne.placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:3,autoFocus:!0})]})]},"step2-existing-positive"),o===3&&!t&&f&&e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-5 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-base font-semibold text-purple-800",children:(q=ae[n])==null?void 0:q.encouragement})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:["ðŸŽ¯ ",(ie=ae[n])==null?void 0:ie.actionQuestion]}),e.jsx("textarea",{value:v,onChange:w=>O(w.target.value),placeholder:(G=ae[n])==null?void 0:G.placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:3,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Algo pequeÃ±o y concreto que estÃ© en tu control"})]})]},"step3-existing-negative")]})})}),e.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 rounded-b-3xl shadow-lg",children:e.jsxs("div",{className:"flex gap-3",children:[o>1&&e.jsx(l.button,{onClick:()=>i(o-1),className:"px-6 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"AtrÃ¡s"}),e.jsx(l.button,{onClick:z,disabled:o===1&&!k||o===2&&!I||o===3&&!m||o===4&&!C,className:`flex-1 py-3 rounded-xl font-semibold transition-all ${o===1&&k||o===2&&I||o===3&&m||o===4&&C?"bg-gradient-to-r from-purple-400 to-pink-400 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,whileHover:o===1&&k||o===2&&I||o===3&&m||o===4&&C?{scale:1.02}:{},whileTap:o===1&&k||o===2&&I||o===3&&m||o===4&&C?{scale:.98}:{},children:o===D?"Comenzar mi dÃ­a âœ¨":"Continuar"})]})})]})})}function pa({onComplete:a}){const{setDayStory:t,autoSave:r}=H(),[s,o]=x.useState(""),[i,n]=x.useState(""),[c,d]=x.useState(""),p=async()=>{t({howStarted:s,mostSignificant:i,howClosing:c}),await new Promise(y=>setTimeout(y,100)),await r(),console.log("âœ… Historia del dÃ­a guardada"),a()},g=i.trim()!=="";return e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-indigo-100/90 to-purple-100/90 backdrop-blur-md z-50 flex items-center justify-center p-4 pb-24",children:e.jsxs(l.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[85vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 bg-white border-b border-purple-100 px-6 py-4 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-xl flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ðŸŒ™ Cuenta tu dÃ­a"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Cierre narrativo"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Convertir tu dÃ­a en una historia te ayuda a procesar experiencias y consolidar recuerdos con significado emocional"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["ðŸŒ… Â¿CÃ³mo comenzÃ³ tu dÃ­a?",e.jsx("span",{className:"text-xs text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:s,onChange:y=>o(y.target.value),placeholder:"Ej: DespertÃ© sin energÃ­a, pero con ganas de avanzar...",className:"w-full p-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm",maxLength:150})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["âš¡ Â¿QuÃ© fue lo mÃ¡s significativo hoy?",e.jsx("span",{className:"text-xs text-purple-600",children:"(requerido)"})]}),e.jsx("textarea",{value:i,onChange:y=>n(y.target.value),placeholder:"Ej: Una conversaciÃ³n me hizo reflexionar sobre...\\nLogrÃ© terminar algo que venÃ­a posponiendo...\\nMe di cuenta de que necesito...",className:"w-full p-3 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm resize-none",rows:4,maxLength:300}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.length,"/300 caracteres"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["ðŸŒ™ Â¿Con quÃ© sensaciÃ³n cierras tu dÃ­a?",e.jsx("span",{className:"text-xs text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),placeholder:"Ej: Tranquilo, Agradecido, Cansado pero satisfecho...",className:"w-full p-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm",maxLength:100})]}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl border border-pink-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-pink-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-2",children:"ðŸ’­ ReflexiÃ³n final (opcional)"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Â¿QuÃ© agradeces de hoy aunque haya sido difÃ­cil?",e.jsx("br",{}),"Â¿QuÃ© aprendiste que no sabÃ­as ayer?"]})]})]})})]})}),e.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 rounded-b-3xl shadow-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l.button,{onClick:()=>a(),className:"px-6 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Saltar"}),e.jsx(l.button,{onClick:p,disabled:!g,className:`flex-1 py-3 rounded-xl font-semibold transition-all ${g?"bg-gradient-to-r from-indigo-400 to-purple-400 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,whileHover:g?{scale:1.02}:{},whileTap:g?{scale:.98}:{},children:"Cerrar mi dÃ­a ðŸŒ™"})]})})]})})}const xa={apiKey:"AIzaSyCVIY7zq53TwD_GdNZqJvIKQr-yLsfSCjw",authDomain:"daylo-app-89843.firebaseapp.com",projectId:"daylo-app-89843",storageBucket:"daylo-app-89843.firebasestorage.app",messagingSenderId:"289095124470",appId:"1:289095124470:web:a6c73903a36d0dfb8ff3d7"},ha=ft(xa),N=bt(ha),W=(a,t=5e3)=>!a||typeof a!="string"?"":a.trim().slice(0,t).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/javascript:/gi,""),Pe=a=>!a||typeof a!="string"?!1:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)&&a.length<=254,ga=a=>!a||typeof a!="string"?"":a.trim().slice(0,100).replace(/[<>'"]/g,""),ya=a=>!a||typeof a!="string"?"":a.trim().slice(0,1e4).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,""),E=()=>{const a=localStorage.getItem("daylo-user-email")||"anonymous";return a!=="anonymous"&&!Pe(a)?(console.error("âš ï¸ Email invÃ¡lido detectado"),"anonymous"):a},qe=async a=>{try{const t=A(N,"users",a),r=await P(t);if(r.exists()){const s=r.data();return{name:s.name,email:s.email}}return null}catch(t){return console.error("âŒ Error verificando usuario:",t),null}},He=async(a,t)=>{try{if(!Pe(t))throw new Error("Email invÃ¡lido");const r=ga(a);if(!r||r.length<2)throw new Error("Nombre debe tener al menos 2 caracteres");const s=A(N,"users",t);await L(s,{name:r,email:t.toLowerCase(),createdAt:$.now(),updatedAt:$.now()},{merge:!0}),console.log("âœ… Usuario guardado en Firebase:",t)}catch(r){throw console.error("âŒ Error guardando usuario:",r),r}},fa=async a=>{var t,r;try{const s=E();if(!s||s==="anonymous")throw console.error("âŒ No se puede guardar: Email de usuario no encontrado"),console.log("ðŸš¨ Por favor ingresa con tu email primero"),new Error("Email de usuario no encontrado");const o=new Date().toISOString().split("T")[0],i=`${s}_${o}`,n={...a,userEmail:s,date:a.date||new Date().toISOString(),updatedAt:$.now()};console.log("ðŸ’¾ INTENTANDO GUARDAR EN FIREBASE:"),console.log("ðŸ“ ColecciÃ³n: dailyEntries"),console.log("ðŸ†” Document ID:",i),console.log("ðŸ“§ User Email:",s),console.log("ðŸ“Š Datos:",{entryId:i,userEmail:s,activities:((t=a.activities)==null?void 0:t.length)||0,tasks:((r=a.tasks)==null?void 0:r.length)||0,emotionalCheckIn:a.emotionalCheckIn?"âœ…":"âŒ",dayIntention:a.dayIntention?"âœ…":"âŒ",diaryNote:a.diaryNote?"âœ…":"âŒ"}),await L(A(N,"dailyEntries",i),n,{merge:!0}),console.log("âœ… Entrada guardada exitosamente en Firebase:",i)}catch(s){throw console.error("âŒ Error guardando en Firebase:",s),s}},Le=async()=>{try{const a=E(),t=new Date().toISOString().split("T")[0],r=`${a}_${t}`,s=A(N,"dailyEntries",r),o=await P(s);if(o.exists()){const i=o.data(),n=new Date(i.date).toISOString().split("T")[0];return n!==t?(console.warn("âš ï¸ Documento encontrado pero no es del dÃ­a actual:",n,"vs",t),null):i}return null}catch(a){return console.error("âŒ Error obteniendo entrada de hoy:",a),null}},ba=async()=>{try{const a=E(),t=V(N,"dailyEntries"),r=oe(t,le("userEmail","==",a)),s=await se(r),o=[];return s.forEach(i=>{o.push(i.data())}),o.sort((i,n)=>new Date(n.date).getTime()-new Date(i.date).getTime()),console.log(`âœ… ${o.length} entradas cargadas desde Firebase`),o}catch(a){return console.error("âŒ Error obteniendo entradas:",a),[]}},va=async(a=7)=>{try{const t=E(),r=V(N,"dailyEntries"),s=oe(r,le("userEmail","==",t)),o=await se(s),i=[],n=new Date;return n.setDate(n.getDate()-a),o.forEach(c=>{const d=c.data();new Date(d.date)>=n&&i.push(d)}),i.sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime()),i}catch(t){return console.error("âŒ Error obteniendo entradas recientes:",t),[]}},ja=async a=>{try{const t=E(),r={id:a.id,activityIcon:a.activityIcon,activityLabel:a.activityLabel,duration:a.duration,timestamp:$.now(),date:a.date,userEmail:t};a.facets&&Object.keys(a.facets).length>0&&(r.facets=a.facets),a.notes&&a.notes.trim().length>0&&(r.notes=a.notes),a.energyImpact&&(r.energyImpact=a.energyImpact),await be(V(N,"activityHistory"),r),console.log("âœ… Activity log guardado en Firebase")}catch(t){throw console.error("âŒ Error guardando activity log:",t),t}},wa=async a=>{try{const t=E(),r={...a,userEmail:t,timestamp:$.now()};await be(V(N,"timeHistory"),r),console.log("âœ… Time log guardado en Firebase")}catch(t){throw console.error("âŒ Error guardando time log:",t),t}},Na=async(a=30)=>{try{const t=E(),r=new Date;r.setDate(r.getDate()-a);const s=r.toISOString().split("T")[0],o=V(N,"activityHistory"),i=oe(o,le("userEmail","==",t)),n=await se(i),c=[];return n.forEach(d=>{const p={...d.data(),id:d.id};p.date>=s&&c.push(p)}),c.sort((d,p)=>d.date!==p.date?p.date.localeCompare(d.date):new Date(p.timestamp).getTime()-new Date(d.timestamp).getTime()),console.log(`âœ… ${c.length} activity logs cargados desde Firebase`),c}catch(t){return console.error("âŒ Error obteniendo historial de actividades:",t),[]}},Ea=async(a=30)=>{try{const t=E(),r=new Date;r.setDate(r.getDate()-a);const s=r.toISOString().split("T")[0],o=V(N,"timeHistory"),i=oe(o,le("userEmail","==",t)),n=await se(i),c=[];return n.forEach(d=>{const p={...d.data(),id:d.id};p.date>=s&&c.push(p)}),c.sort((d,p)=>d.date!==p.date?p.date.localeCompare(d.date):new Date(p.timestamp).getTime()-new Date(d.timestamp).getTime()),console.log(`âœ… ${c.length} time logs cargados desde Firebase`),c}catch(t){return console.error("âŒ Error obteniendo historial de tiempo:",t),[]}},Sa=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r={currentGoal:W(a.currentGoal,500),futureVision:W(a.futureVision,500),mainObstacle:W(a.mainObstacle,500)},s=A(N,"user_objectives",t);await L(s,{userEmail:t,...r,createdAt:$.now(),updatedAt:$.now()},{merge:!0}),console.log("âœ… Objetivos del usuario guardados:",t)}catch(t){throw console.error("âŒ Error guardando objetivos:",t),t}},Da=async()=>{try{const a=E(),t=A(N,"user_objectives",a),r=await P(t);if(r.exists()){const s=r.data();return{currentGoal:s.currentGoal,futureVision:s.futureVision,mainObstacle:s.mainObstacle}}return null}catch(a){return console.error("âŒ Error obteniendo objetivos:",a),null}},Ia=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o={userEmail:t,date:r,intention:a.intention,feelingContext:a.feelingContext,isNegativeEmotion:a.isNegativeEmotion,createdAt:$.now(),updatedAt:$.now()};a.shareThoughts!==void 0&&a.shareThoughts!==""&&(o.shareThoughts=a.shareThoughts);const i=A(N,"daily_intentions",s);await L(i,o,{merge:!0}),console.log("âœ… IntenciÃ³n diaria guardada:",s)}catch(t){throw console.error("âŒ Error guardando intenciÃ³n diaria:",t),t}},Ta=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"daily_intentions",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de intenciÃ³n no coincide:",n.date,"vs",r),null):{intention:n.intention,feelingContext:n.feelingContext,shareThoughts:n.shareThoughts}}return null}catch(t){return console.error("âŒ Error obteniendo intenciÃ³n diaria:",t),null}},Ca=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=a.reduce((c,d)=>c+(d.duration||0),0),i={drain:a.filter(c=>c.energyImpact==="drain").length,neutral:a.filter(c=>c.energyImpact==="neutral").length,boost:a.filter(c=>c.energyImpact==="boost").length},n=A(N,"daily_activities",s);await L(n,{userEmail:t,date:r,activities:a.map(c=>({...c,timestamp:$.now()})),totalMinutes:o,activitiesCount:a.length,energyDistribution:i,createdAt:$.now(),updatedAt:$.now()},{merge:!0}),console.log("âœ… Actividades diarias guardadas:",s,`(${a.length} actividades)`)}catch(t){throw console.error("âŒ Error guardando actividades diarias:",t),t}},ka=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"daily_activities",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de documento no coincide:",n.date,"vs",r),[]):n.activities||[]}return[]}catch(t){return console.error("âŒ Error obteniendo actividades diarias:",t),[]}},Aa=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o={userEmail:t,date:r,feeling:a.feeling,isNewUser:a.isNewUser,timestamp:$.now()};a.shareThoughts!==void 0&&a.shareThoughts!==""&&(o.shareThoughts=a.shareThoughts),a.actionIntention!==void 0&&a.actionIntention!==""&&(o.actionIntention=a.actionIntention);const i=A(N,"daily_emotions",s);await L(i,o,{merge:!0}),console.log("âœ… EmociÃ³n diaria guardada:",s,a.feeling)}catch(t){throw console.error("âŒ Error guardando emociÃ³n diaria:",t),t}},_a=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"daily_emotions",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de emociÃ³n no coincide:",n.date,"vs",r),null):{feeling:n.feeling,shareThoughts:n.shareThoughts,actionIntention:n.actionIntention}}return null}catch(t){return console.error("âŒ Error obteniendo emociÃ³n diaria:",t),null}},$a=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=a.filter(c=>c.completed).length,i=a.length>0?o/a.length*100:0,n=A(N,"tasks",s);await L(n,{userEmail:t,date:r,tasks:a,totalTasks:a.length,completedTasks:o,completionRate:i,updatedAt:$.now()},{merge:!0}),console.log("âœ… Tareas guardadas:",s,`(${a.length} tareas, ${o} completadas)`)}catch(t){throw console.error("âŒ Error guardando tareas:",t),t}},Oa=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"tasks",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de tareas no coincide:",n.date,"vs",r),[]):n.tasks||[]}return[]}catch(t){return console.error("âŒ Error obteniendo tareas:",t),[]}},Fa=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=ya(a),i=o.trim().split(/\s+/).length,n=A(N,"diary_notes",s);await L(n,{userEmail:t,date:r,note:o,wordCount:i,createdAt:$.now(),updatedAt:$.now()},{merge:!0}),console.log("âœ… Nota de diario guardada:",s,`(${i} palabras)`)}catch(t){throw console.error("âŒ Error guardando nota de diario:",t),t}},za=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"diary_notes",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de nota no coincide:",n.date,"vs",r),null):n.note||null}return null}catch(t){return console.error("âŒ Error obteniendo nota de diario:",t),null}},Ra=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=new Date().toISOString().split("T")[0],s=`${t}_${r}`,o={howStarted:a.howStarted?W(a.howStarted):void 0,mostSignificant:a.mostSignificant?W(a.mostSignificant):void 0,howClosing:a.howClosing?W(a.howClosing):void 0},i=A(N,"day_stories",s);await L(i,{userEmail:t,date:r,...o,createdAt:$.now(),updatedAt:$.now()},{merge:!0}),console.log("âœ… Historia del dÃ­a guardada:",s)}catch(t){throw console.error("âŒ Error guardando historia del dÃ­a:",t),t}},Pa=async a=>{try{const t=E(),r=a||new Date().toISOString().split("T")[0],s=`${t}_${r}`,o=A(N,"day_stories",s),i=await P(o);if(i.exists()){const n=i.data();return n.date&&n.date!==r?(console.warn("âš ï¸ Fecha de historia no coincide:",n.date,"vs",r),null):{howStarted:n.howStarted,mostSignificant:n.mostSignificant,howClosing:n.howClosing}}return null}catch(t){return console.error("âŒ Error obteniendo historia del dÃ­a:",t),null}},qa=async()=>{try{const a=await Me();if(a.length>=9){console.log("âœ… CatÃ¡logo ya existe (",a.length,"actividades)");return}console.log("ðŸ”¨ Creando catÃ¡logo de actividades...");const t=[{id:"work",label:"Trabajo",emoji:"ðŸ’¼",color:"#3B82F6",defaultDuration:60,facets:[{id:"productivity",label:"Â¿QuÃ© tan productivo fue?",type:"rating",emoji:"ðŸ“Š",min:1,max:5},{id:"stress",label:"Â¿Nivel de estrÃ©s?",type:"rating",emoji:"ðŸ˜°",min:1,max:5},{id:"wasRemote",label:"Â¿Fue remoto?",type:"boolean",emoji:"ðŸ "}],order:1},{id:"exercise",label:"Ejercicio",emoji:"ðŸ‹ï¸",color:"#10B981",defaultDuration:45,facets:[{id:"intensity",label:"Â¿QuÃ© tan intenso fue?",type:"rating",emoji:"ðŸ’ª",min:1,max:5},{id:"enjoyment",label:"Â¿QuÃ© tanto lo disfrutaste?",type:"rating",emoji:"ðŸ˜Š",min:1,max:5}],order:2},{id:"social",label:"Social",emoji:"ðŸ‘¥",color:"#F59E0B",defaultDuration:90,facets:[{id:"connection",label:"Â¿QuÃ© tan conectado te sentiste?",type:"rating",emoji:"ðŸ¤",min:1,max:5},{id:"energy",label:"Â¿Te dio o quitÃ³ energÃ­a?",type:"rating",emoji:"âš¡",min:1,max:5}],order:3},{id:"study",label:"Estudio",emoji:"ðŸ“š",color:"#8B5CF6",defaultDuration:60,facets:[{id:"focus",label:"Â¿QuÃ© tan concentrado estuviste?",type:"rating",emoji:"ðŸŽ¯",min:1,max:5},{id:"understanding",label:"Â¿QuÃ© tanto entendiste?",type:"rating",emoji:"ðŸ’¡",min:1,max:5}],order:4},{id:"sleep",label:"Descanso",emoji:"ðŸ˜´",color:"#6366F1",defaultDuration:480,facets:[{id:"quality",label:"Â¿Calidad del sueÃ±o?",type:"rating",emoji:"ðŸŒ™",min:1,max:5},{id:"uninterrupted",label:"Â¿Dormiste de corrido?",type:"boolean",emoji:"ðŸ’¤"}],order:5},{id:"food",label:"Comida",emoji:"ðŸ½ï¸",color:"#EF4444",defaultDuration:30,facets:[{id:"healthy",label:"Â¿QuÃ© tan saludable fue?",type:"rating",emoji:"ðŸ¥—",min:1,max:5},{id:"satisfaction",label:"Â¿QuÃ© tan satisfecho quedaste?",type:"rating",emoji:"ðŸ˜‹",min:1,max:5}],order:6},{id:"hobbies",label:"Hobbies",emoji:"ðŸŽ¨",color:"#EC4899",defaultDuration:60,facets:[{id:"enjoyment",label:"Â¿QuÃ© tanto lo disfrutaste?",type:"rating",emoji:"ðŸŽ‰",min:1,max:5},{id:"flow",label:"Â¿Entraste en flow?",type:"boolean",emoji:"ðŸŒŠ"}],order:7},{id:"health",label:"Salud",emoji:"ðŸ¥",color:"#14B8A6",defaultDuration:45,facets:[{id:"necessary",label:"Â¿Era necesario?",type:"boolean",emoji:"âš•ï¸"},{id:"stress",label:"Â¿Nivel de estrÃ©s?",type:"rating",emoji:"ðŸ˜°",min:1,max:5}],order:8},{id:"home",label:"Hogar",emoji:"ðŸ ",color:"#F97316",defaultDuration:45,facets:[{id:"satisfaction",label:"Â¿QuÃ© tan satisfecho quedaste?",type:"rating",emoji:"âœ¨",min:1,max:5},{id:"wasTiring",label:"Â¿Fue cansado?",type:"boolean",emoji:"ðŸ˜“"}],order:9}],r=wt(N);for(const s of t){const o=A(N,"activities_catalog",s.id);r.set(o,s)}await r.commit(),console.log("âœ… CatÃ¡logo de actividades poblado exitosamente (9 actividades)")}catch(a){throw console.error("âŒ Error poblando catÃ¡logo de actividades:",a),a}},Me=async()=>{try{const a=V(N,"activities_catalog"),t=oe(a,jt("order")),r=await se(t),s=[];return r.forEach(o=>{s.push({...o.data(),id:o.id})}),console.log(`âœ… CatÃ¡logo de actividades cargado (${s.length} actividades)`),s}catch(a){return console.error("âŒ Error obteniendo catÃ¡logo de actividades:",a),[]}},Ha=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=a||new Date().toISOString().slice(0,7),s=`${t}_${r}`,o=A(N,"dashboard_data",s);await L(o,{userEmail:t,month:r,totalActivities:0,totalMinutes:0,activitiesByType:{},emotionsSummary:{},energyPatterns:{drain:0,neutral:0,boost:0},activeDays:0,totalDays:0,activePercentage:0,totalTasksCreated:0,totalTasksCompleted:0,avgCompletionRate:0,updatedAt:$.now()},{merge:!0}),console.log("âœ… Dashboard data actualizado:",s)}catch(t){throw console.error("âŒ Error actualizando dashboard data:",t),t}},La=async a=>{try{const t=E(),r=a||new Date().toISOString().slice(0,7),s=`${t}_${r}`,o=A(N,"dashboard_data",s),i=await P(o);return i.exists()?i.data():null}catch(t){return console.error("âŒ Error obteniendo dashboard data:",t),null}},Ma=async a=>{try{const t=E();if(!t||t==="anonymous")throw console.error("âŒ No se puede guardar: Email de usuario no encontrado"),new Error("Email de usuario no encontrado");const r=W(a.description);if(!r||r.length<3)throw new Error("La descripciÃ³n debe tener al menos 3 caracteres");const s={userEmail:t,date:a.date,type:a.type,description:r,completed:a.completed||!1,createdAt:$.now(),updatedAt:$.now()},o=V(N,"calendar_events"),i=await be(o,s);return console.log("âœ… Evento de calendario guardado en Firebase:",i.id),console.log("ðŸ“‹ Detalles del evento:",{id:i.id,date:a.date,type:a.type,description:r,userEmail:t}),{id:i.id}}catch(t){return console.error("âŒ Error guardando evento de calendario:",t),console.error("ðŸ” Detalles completos del error:",t),null}},Qa=async()=>{try{const a=E();if(!a||a==="anonymous")return console.warn("âš ï¸ Usuario no identificado, no se pueden cargar eventos"),[];console.log("ðŸ” Cargando eventos de calendario para:",a);const t=V(N,"calendar_events"),r=oe(t,le("userEmail","==",a)),s=await se(r),o=[];return s.forEach(i=>{var c,d;const n={id:i.id,...i.data(),createdAt:(c=i.data().createdAt)==null?void 0:c.toDate(),updatedAt:(d=i.data().updatedAt)==null?void 0:d.toDate()};o.push(n),console.log("ðŸ“Œ Evento cargado:",{id:i.id,date:i.data().date,type:i.data().type,description:i.data().description})}),o.sort((i,n)=>i.date<n.date?-1:i.date>n.date?1:0),console.log(`âœ… ${o.length} eventos de calendario cargados desde Firebase`),o}catch(a){return console.error("âŒ Error obteniendo eventos de calendario:",a),console.error("ðŸ” Detalles completos del error:",a),[]}},Va=async a=>{try{const t=E();if(!t||t==="anonymous")throw new Error("Email de usuario no encontrado");const r=A(N,"calendar_events",a),s=await P(r);return s.exists()?s.data().userEmail!==t?(console.error("âŒ No tienes permiso para eliminar este evento"),!1):(await vt(r),console.log("âœ… Evento eliminado de Firebase:",a),!0):(console.error("âŒ Evento no encontrado"),!1)}catch(t){return console.error("âŒ Error eliminando evento:",t),!1}},Ga=async(a,t)=>{try{const r=E();if(!r||r==="anonymous")throw new Error("Email de usuario no encontrado");const s=A(N,"calendar_events",a),o=await P(s);return o.exists()?o.data().userEmail!==r?(console.error("âŒ No tienes permiso para modificar este evento"),!1):(await L(s,{completed:t,updatedAt:$.now()},{merge:!0}),console.log("âœ… Estado de evento actualizado en Firebase:",a),!0):(console.error("âŒ Evento no encontrado"),!1)}catch(r){return console.error("âŒ Error actualizando estado de evento:",r),!1}},xe=Object.freeze(Object.defineProperty({__proto__:null,createOrUpdateUser:He,deleteCalendarEvent:Va,getActivitiesCatalog:Me,getActivityHistory:Na,getAllUserEntries:ba,getCalendarEvents:Qa,getDailyActivities:ka,getDailyEmotion:_a,getDailyIntention:Ta,getDashboardData:La,getDayStory:Pa,getDiaryNote:za,getRecentEntries:va,getTasks:Oa,getTimeHistory:Ea,getTodayEntry:Le,getUserByEmail:qe,getUserObjectives:Da,populateActivitiesCatalog:qa,saveActivityLog:ja,saveCalendarEvent:Ma,saveDailyActivities:Ca,saveDailyEmotion:Aa,saveDailyEntry:fa,saveDailyIntention:Ia,saveDayStory:Ra,saveDiaryNote:Fa,saveTasks:$a,saveTimeLog:wa,saveUserObjectives:Sa,toggleCalendarEvent:Ga,updateDashboardData:Ha},Symbol.toStringTag,{value:"Module"}));function Ba(){const a=new Date().getHours();return a>=5&&a<12?"morning":a>=12&&a<19?"afternoon":"evening"}function Ua(){const{selectedActivities:a,totalMinutes:t,currentEntry:r,addActivity:s,restoreActivities:o,removeActivity:i,updateActivityDuration:n,updateActivityFacets:c,restoreTasks:d,setModalOpen:p,completeCheckIn:g,checkAndResetIfNewDay:y,autoSave:j}=H(),[u,b]=x.useState(null),[S,v]=x.useState({}),[O,f]=x.useState(0),[D,z]=x.useState(""),[k,I]=x.useState("synced"),[m]=x.useState(Ba()),[C,B]=x.useState([]),[J,K]=x.useState(!1),[Y,Z]=x.useState(!1),[ce,ne]=x.useState(!1),[q,ie]=x.useState(!1),[G,w]=x.useState("purpose");x.useEffect(()=>{(async()=>{if(y()){console.log("âœ¨ Inicio de nuevo dÃ­a - datos reseteados");return}if(a.length>0){console.log("â­ï¸ Store ya tiene datos, no recargar");return}const F=new Date().toISOString().split("T")[0],T=JSON.parse(localStorage.getItem("daylo-entries")||"[]").find(ee=>new Date(ee.date).toISOString().split("T")[0]===F);T&&(console.log("ðŸ“¦ Cargando desde localStorage:",T),T.activities&&T.activities.length>0&&o(T.activities),T.tasks&&T.tasks.length>0&&(d(T.tasks),console.log("âœ… Tareas cargadas:",T.tasks.length)),T.diaryNote&&H.getState().setDiaryNote(T.diaryNote),T.emotionalCheckIn&&H.getState().setEmotionalCheckIn(T.emotionalCheckIn),T.dayIntention&&H.getState().setDayIntention(T.dayIntention),T.dayStory&&H.getState().setDayStory(T.dayStory));try{const ee=await Le();ee&&ee.activities&&(new Date(ee.date).toISOString().split("T")[0]===F?console.log("â˜ï¸ Firebase sincronizado con datos del dÃ­a actual"):console.warn("âš ï¸ Firebase devolviÃ³ datos de otro dÃ­a, ignorando"))}catch{console.log("âš ï¸ Firebase no disponible, usando datos locales")}})()},[]);const Qe=h=>{const _=a.find(X=>X.icon===h.id),F=ta(h.id);B(F),_?(b(h),v(_.facets||{}),f(_.duration),z(_.notes||"")):(b(h),v({}),f(h.defaultDuration),z("")),p(!0)},Ve=async()=>{if(!u||q)return;const h=a.find(T=>T.icon===u.id),_=1440;let F=t;if(h?F=t-h.duration+O:F=t+O,console.log("ðŸ” ValidaciÃ³n 24h:",{totalActual:t,duracionAnterior:(h==null?void 0:h.duration)||0,duracionNueva:O,totalNuevo:F,excede:F>_}),F>_){ne(!0);return}ie(!0),I("syncing");try{h?(n(h.id,O),c(h.id,S,D)):s({id:Date.now().toString(),icon:u.id,label:u.label,duration:O,color:u.color,facets:S,notes:D}),await new Promise(T=>setTimeout(T,100)),await j(),I("synced"),console.log("âœ… Actividad guardada en Firebase"),b(null),p(!1),v({}),z("")}catch(T){console.error("âŒ Error guardando:",T),I("offline")}finally{ie(!1)}},Ge=async()=>{if(!u)return;const h=a.find(_=>_.icon===u.id);h&&(i(h.id),await new Promise(_=>setTimeout(_,100)),await j(),console.log("âœ… Actividad eliminada y guardado en Firebase")),b(null),p(!1)},Be=C,ve=m==="morning"?{title:"ðŸŒ… Â¡Buenos dÃ­as!",subtitle:"Comienza tu dÃ­a con intenciÃ³n"}:m==="afternoon"?{title:"Â¿CÃ³mo va tu dÃ­a?",subtitle:"Registra lo que has vivido"}:{title:"ðŸŒ™ Reflexiona sobre tu dÃ­a",subtitle:"Un momento para cerrar el dÃ­a conscientemente"};return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"daylo-card text-center",children:[e.jsx(l.h2,{className:"text-2xl font-bold text-gray-800 mb-2",animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0},children:ve.title}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center justify-center gap-2",children:[ve.subtitle,k==="synced"&&e.jsxs("span",{className:"text-green-600 flex items-center gap-1 text-xs",children:[e.jsx(we,{size:14})," Sincronizado"]}),k==="syncing"&&e.jsxs(l.span,{className:"text-blue-600 flex items-center gap-1 text-xs",animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:[e.jsx(we,{size:14})," Guardando..."]}),k==="offline"&&e.jsxs("span",{className:"text-orange-600 flex items-center gap-1 text-xs",children:[e.jsx(ut,{size:14})," Sin conexiÃ³n"]})]})]}),e.jsx(R,{children:J&&e.jsx(ma,{isNewUser:!localStorage.getItem("daylo-onboarding-complete"),onComplete:()=>{K(!1),p(!1),g(),localStorage.getItem("daylo-onboarding-complete")||localStorage.setItem("daylo-onboarding-complete","true"),j()}})}),e.jsx(R,{children:Y&&e.jsx(pa,{onComplete:()=>{Z(!1),p(!1),j()}})}),e.jsx(R,{children:ce&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:e.jsxs(l.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:h=>h.stopPropagation(),className:"bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(l.div,{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:e.jsx(Ae,{className:"w-10 h-10 text-orange-600",strokeWidth:2.5})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:"â° Superaste las 24 horas"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-2",children:(()=>{const h=a.find(F=>F.icon===(u==null?void 0:u.id)),_=h?t-h.duration+O:t+O;return e.jsxs(e.Fragment,{children:["EstÃ¡s intentando registrar ",e.jsxs("span",{className:"font-semibold text-orange-600",children:[Math.floor(_/60),"h ",_%60,"min"]})," en total."]})})()}),e.jsx("p",{className:"text-xs text-gray-500 text-center mb-6",children:"Un dÃ­a tiene solo 24 horas. Ajusta la duraciÃ³n de esta actividad o elimina otra para continuar."}),e.jsx(l.button,{onClick:()=>{ne(!1)},className:"w-full py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"âœ“ Entendido, voy a ajustar"})]})})}),r.dayIntention&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âœ¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 font-semibold mb-1",children:"Tu intenciÃ³n de hoy"}),e.jsx("p",{className:"text-sm text-gray-800",children:r.dayIntention})]})]})}),m==="evening"&&a.length===0&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-2xl p-5 border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’š"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-2",children:"No pasa nada si hoy no registraste actividades"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Los dÃ­as de descanso tambiÃ©n cuentan. Â¿QuÃ© SÃ hiciste hoy, aunque parezca pequeÃ±o?"})]})]})}),(()=>{var T;const h=new Date().getHours(),_=h>=20&&h<23,F=a.length>0,X=!((T=r.dayStory)!=null&&T.mostSignificant);return m==="evening"&&_&&F&&X?e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 rounded-2xl p-5 border-2 border-indigo-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(l.span,{className:"text-3xl",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"ðŸŒ™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Â¿Tomas un momento para cerrar tu dÃ­a?"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Reflexionar antes de dormir te ayuda a procesar lo vivido y descansar mejor"}),e.jsx(l.button,{onClick:()=>{Z(!0),p(!0)},className:"w-full py-3 bg-gradient-to-r from-indigo-400 to-purple-400 text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"âœ¨ SÃ­, cerrar mi dÃ­a ahora"})]})]})}):m==="evening"&&F&&X&&!_?e.jsx(l.button,{onClick:()=>{Z(!0),p(!0)},className:"w-full py-4 bg-gradient-to-r from-indigo-400 to-purple-400 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"ðŸŒ™ Cerrar mi dÃ­a con reflexiÃ³n"}):null})(),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[e.jsxs("button",{onClick:()=>w("purpose"),className:`flex-1 py-4 px-6 font-semibold transition-all relative ${G==="purpose"?"text-purple-700 bg-purple-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(mt,{size:20}),e.jsx("span",{children:"Intenciones"})]}),G==="purpose"&&e.jsx(l.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 to-pink-500",transition:{type:"spring",stiffness:500,damping:30}})]}),e.jsxs("button",{onClick:()=>w("activities"),className:`flex-1 py-4 px-6 font-semibold transition-all relative ${G==="activities"?"text-blue-700 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(pt,{size:20}),e.jsx("span",{children:"Mi DÃ­a"}),a.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:a.length})]}),G==="activities"&&e.jsx(l.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-teal-500",transition:{type:"spring",stiffness:500,damping:30}})]})]}),e.jsx(R,{mode:"wait",children:G==="purpose"?e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"p-6",children:e.jsx(ca,{})},"purpose"):e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Xt.map((h,_)=>e.jsx(l.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:_*.05},children:e.jsx(oa,{activity:h,isSelected:a.some(F=>F.icon===h.id),onToggle:()=>Qe(h)})},h.id))}),a.length>0&&e.jsxs(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 pt-4 border-t border-gray-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-semibold text-gray-600",children:[a.length," ",a.length===1?"actividad":"actividades"]}),e.jsxs("span",{className:`text-xl font-bold ${t>1440?"text-red-600":t>1200?"text-orange-600":"text-purple-600"}`,children:[Math.floor(t/60),"h ",t%60,"m"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"ðŸ•’ Registrado"}),e.jsxs("span",{className:`font-semibold ${t>1440?"text-red-600":"text-purple-600"}`,children:[Math.floor(t/60),"h ",t%60,"m / 24h"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx(l.div,{className:"h-full rounded-full",style:{width:`${Math.min(t/1440*100,100)}%`,background:t>1440?"linear-gradient(90deg, #ef4444, #dc2626)":"linear-gradient(90deg, #a855f7, #ec4899)"},initial:{width:0},animate:{width:`${Math.min(t/1440*100,100)}%`},transition:{duration:.5,ease:"easeOut"}})}),t>1440&&e.jsx(l.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-xs text-red-600 mt-1.5 font-medium",children:"âš ï¸ Has excedido las 24 horas del dÃ­a"})]})]})]})]})},"activities")})]}),e.jsx(na,{isOpen:!!u,onClose:()=>{b(null),p(!1)},color:(u==null?void 0:u.color)||"#C4E5FF",title:(u==null?void 0:u.label)||"",children:e.jsxs("div",{className:"space-y-6 px-6 py-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"â±ï¸ Â¿CuÃ¡nto tiempo dedicaste?"}),e.jsx(sa,{label:"",value:O,onChange:f,color:(u==null?void 0:u.color)||"#C4E5FF",max:720})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"ðŸ’­ CuÃ©ntanos mÃ¡s sobre esta actividad"}),e.jsx("div",{className:"space-y-4",children:Be.map((h,_)=>e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.1},children:h.type==="rating"?e.jsx(ia,{emoji:h.emoji,label:h.label,value:S[h.id]||0,onChange:F=>v({...S,[h.id]:F}),color:(u==null?void 0:u.color)||"#C4E5FF"}):e.jsx(la,{emoji:h.emoji,label:h.label,value:S[h.id],onChange:F=>v({...S,[h.id]:F}),color:(u==null?void 0:u.color)||"#C4E5FF"})},h.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"ðŸ“ Notas adicionales (opcional)"}),e.jsx("textarea",{value:D,onChange:h=>z(h.target.value),placeholder:"Algo especÃ­fico que quieras recordar...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-pastel-purple focus:outline-none resize-none",rows:3,maxLength:150}),e.jsxs("div",{className:"text-xs text-gray-400 text-right mt-1",children:[D.length,"/150"]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white to-white/95 pt-6 pb-4 px-6 border-t-2 border-gray-200 shadow-2xl z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex gap-3",children:[a.some(h=>h.icon===(u==null?void 0:u.id))&&e.jsx(l.button,{onClick:Ge,disabled:q,className:"px-6 py-4 rounded-full font-bold text-base bg-red-100 text-red-600 hover:bg-red-200 transition-colors flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",whileHover:q?{}:{scale:1.05},whileTap:q?{}:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:"Borrar"}),e.jsx(l.button,{onClick:Ve,disabled:q,className:"flex-1 py-5 rounded-full font-bold text-xl flex items-center justify-center gap-3 shadow-2xl border-2 border-white disabled:opacity-70 disabled:cursor-not-allowed relative overflow-hidden",style:{background:`linear-gradient(135deg, ${u==null?void 0:u.color}, ${u==null?void 0:u.color}DD)`,color:"#1F2937"},whileHover:q?{}:{scale:1.05,y:-2},whileTap:q?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:q?e.jsxs(e.Fragment,{children:[e.jsx(l.div,{className:"w-6 h-6 border-3 border-gray-800 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-6 h-6"}),e.jsx("span",{children:a.some(h=>h.icon===(u==null?void 0:u.id))?"Actualizar":"Guardar"})]})})]})})]})}),e.jsx(da,{timeContext:m})]})}function Wa(){const a=H(r=>r.isModalOpen),t=[{path:"/hoy",icon:Ce,label:"Hoy"},{path:"/calendario",icon:xt,label:"Calendario"},{path:"/dashboard",icon:ht,label:"Dashboard"}];return e.jsx(R,{children:!a&&e.jsx(l.nav,{initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-lg bg-white/80 border-t border-white/50 shadow-lg",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4",children:e.jsx("div",{className:"flex items-center justify-around py-3",children:t.map(r=>e.jsx(Je,{to:r.path,className:({isActive:s})=>`flex flex-col items-center gap-1 px-6 py-2 rounded-2xl transition-all ${s?"bg-gradient-to-r from-pastel-pink to-pastel-purple":"hover:bg-gray-100"}`,children:({isActive:s})=>e.jsxs(e.Fragment,{children:[e.jsx(l.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(r.icon,{size:24,strokeWidth:s?2.5:2,color:s?"#374151":"#9CA3AF"})}),e.jsx("span",{className:`text-xs font-semibold ${s?"text-gray-700":"text-gray-500"}`,children:r.label})]})},r.path))})})})})}function Ja(a){let t=0;for(let s=0;s<a.length;s++)t=a.charCodeAt(s)+((t<<5)-t);const r=Math.abs(t%360);return{primary:`hsl(${r}, 70%, 50%)`,secondary:`hsl(${(r+60)%360}, 75%, 55%)`,accent:`hsl(${(r+120)%360}, 80%, 60%)`,bg:`hsl(${(r+180)%360}, 60%, 92%)`}}function Ka(a){const t=["gradient","geometric","pixel","stripe"],r=a.charCodeAt(0)%t.length;return t[r]}function Ya(a){const t=a.trim().split(" ");return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():a.slice(0,2).toUpperCase()}function Za(a,t,r){if(a==="gradient")return`
      <circle cx="60" cy="60" r="60" fill="url(#mainGradient)"/>
      <circle cx="45" cy="45" r="25" fill="${t.accent}" opacity="0.15"/>
      <circle cx="80" cy="75" r="20" fill="${t.secondary}" opacity="0.12"/>
    `;if(a==="geometric"){const s=r.split("").reduce((i,n)=>i+n.charCodeAt(0),0);let o=`<circle cx="60" cy="60" r="60" fill="${t.bg}"/>`;for(let i=0;i<6;i++){const n=s*(i+1)%80+20,c=s*(i+2)%80+20,d=s*(i+3)%12+8,p=i%2===0?t.primary:t.secondary;o+=`<circle cx="${n}" cy="${c}" r="${d}" fill="${p}" opacity="0.15"/>`}return o}else if(a==="pixel"){const s=r.split("").reduce((i,n)=>i+n.charCodeAt(0),0);let o=`<rect width="120" height="120" fill="${t.bg}"/>`;for(let i=0;i<8;i++)for(let n=0;n<8;n++){const c=i*8+n;s>>c&1&&(o+=`<rect x="${n*15}" y="${i*15}" width="15" height="15" fill="${t.primary}" opacity="0.2" rx="2"/>`)}return o}else return`
      <rect width="120" height="120" fill="${t.bg}"/>
      <rect x="0" y="15" width="120" height="15" fill="${t.primary}" opacity="0.15"/>
      <rect x="0" y="45" width="120" height="15" fill="${t.secondary}" opacity="0.12"/>
      <rect x="0" y="75" width="120" height="15" fill="${t.accent}" opacity="0.1"/>
    `}function Xa({name:a,email:t,size:r=120}){const s=Ja(a+t),o=Ka(a),i=Ya(a);let n=`<svg width="${r}" height="${r}" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" style="border-radius: 50%;">`;return n+=`
    <defs>
      <linearGradient id="mainGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:${s.primary};stop-opacity:0.9" />
        <stop offset="100%" style="stop-color:${s.secondary};stop-opacity:0.7" />
      </linearGradient>
      <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:white;stop-opacity:1" />
        <stop offset="100%" style="stop-color:white;stop-opacity:0.9" />
      </linearGradient>
    </defs>
  `,n+=Za(o,s,t),n+='<circle cx="60" cy="60" r="35" fill="white" opacity="0.25"/>',n+=`
    <text 
      x="60" 
      y="60" 
      text-anchor="middle" 
      dominant-baseline="central" 
      font-family="system-ui, -apple-system, sans-serif" 
      font-size="32" 
      font-weight="700" 
      fill="url(#textGradient)"
      style="text-shadow: 0 2px 4px rgba(0,0,0,0.1);"
    >${i}</text>
  `,n+='<circle cx="60" cy="60" r="58" fill="none" stroke="white" stroke-width="2.5" opacity="0.4"/>',n+="</svg>",n}function er({name:a,email:t,size:r=120,className:s=""}){const o=Xa({name:a,email:t,size:r});return e.jsx("div",{className:`inline-block rounded-full overflow-hidden shadow-lg ${s}`,style:{width:r,height:r},dangerouslySetInnerHTML:{__html:o}})}function tr({onConfirm:a,onCancel:t}){return e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:e.jsxs(l.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:r=>r.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 px-6 py-5 border-b border-red-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-400 to-orange-400 rounded-2xl flex items-center justify-center",children:e.jsx(_e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Cerrar SesiÃ³n"}),e.jsx("p",{className:"text-xs text-red-600",children:"Se perderÃ¡n datos no sincronizados"})]})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200",children:[e.jsx(Ae,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Â¿EstÃ¡s seguro?"}),e.jsx("p",{className:"text-xs text-amber-700",children:"Se cerrarÃ¡ tu sesiÃ³n y volverÃ¡s a la pantalla de bienvenida. Tus datos se mantendrÃ¡n seguros."})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex gap-3 border-t border-gray-100",children:[e.jsx(l.button,{onClick:t,className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-700 font-semibold hover:bg-white transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancelar"}),e.jsx(l.button,{onClick:a,className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-red-500 to-orange-500 text-white font-semibold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cerrar SesiÃ³n"})]})]})})}function ar(){const[a,t]=x.useState(!1),[r,s]=x.useState(!1),[o,i]=x.useState(""),[n,c]=x.useState(""),[d,p]=x.useState(""),[g,y]=x.useState(!1),[j,u]=x.useState(""),[b,S]=x.useState(!1),v=()=>{sessionStorage.setItem("daylo-just-logged-out","true"),U(async()=>{const{useDayloStore:f}=await Promise.resolve().then(()=>Zt);return{useDayloStore:f}},void 0).then(({useDayloStore:f})=>{f.getState().resetStore()}),localStorage.removeItem("daylo-user-name"),localStorage.removeItem("daylo-user-email"),localStorage.removeItem("daylo-entries"),localStorage.removeItem("daylo-last-checkin"),localStorage.removeItem("daylo-activity-history"),localStorage.removeItem("daylo-time-history"),localStorage.removeItem("daylo-onboarding-complete"),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),window.location.href=window.location.pathname,window.location.reload()};x.useEffect(()=>{const f=localStorage.getItem("daylo-user-name"),D=localStorage.getItem("daylo-user-email"),z=sessionStorage.getItem("daylo-just-logged-out");f&&D?i(f):(t(!0),z==="true"&&(s(!0),sessionStorage.removeItem("daylo-just-logged-out")))},[]);const O=async()=>{if(!n.trim()||!d.trim()){u("Por favor completa todos los campos");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){u("Por favor ingresa un correo vÃ¡lido");return}y(!0),u("");try{const D=await qe(d.trim());D?(localStorage.setItem("daylo-user-name",D.name),localStorage.setItem("daylo-user-email",D.email),i(D.name),t(!1),console.log("âœ… Usuario existente cargado:",D.email)):(await He(n.trim(),d.trim()),localStorage.setItem("daylo-user-name",n.trim()),localStorage.setItem("daylo-user-email",d.trim()),i(n.trim()),t(!1),console.log("âœ… Nuevo usuario registrado:",d.trim()))}catch(D){console.error("Error al verificar usuario:",D),u("Error al conectar. Intenta nuevamente.")}finally{y(!1)}};return e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx(l.header,{initial:{y:-100},animate:{y:0},className:"sticky top-0 z-50 backdrop-blur-lg bg-white/70 border-b border-white/50 shadow-sm",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o?e.jsx(Ke,{to:"/perfil",children:e.jsx(l.div,{whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.3},children:e.jsx(er,{name:o,email:localStorage.getItem("daylo-user-email")||"",size:44,className:"shadow-lg cursor-pointer"})})}):e.jsx(l.div,{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pastel-pink to-pastel-purple flex items-center justify-center shadow-lg",whileHover:{scale:1.1,rotate:360},transition:{duration:.5},children:e.jsx("span",{className:"text-2xl",children:"âœ¨"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"Daylo"}),o&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Hola, ",o,"! ðŸ‘‹"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.div,{className:"text-sm text-gray-600 hidden sm:block",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:new Date().toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})}),o&&!a&&e.jsx(l.button,{onClick:()=>S(!0),className:"p-2 rounded-full hover:bg-red-50 text-gray-500 hover:text-red-600 transition-colors group",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Cerrar sesiÃ³n",children:e.jsx(_e,{className:"w-5 h-5"})})]})]})})}),e.jsx("main",{className:"max-w-2xl mx-auto px-4 py-6",children:e.jsx(Ye,{})}),e.jsx(Wa,{}),e.jsx(R,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsx(l.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",children:[e.jsx(l.div,{className:"absolute -top-10 left-1/2 transform -translate-x-1/2",animate:{y:[0,-10,0],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pastel-pink to-pastel-purple flex items-center justify-center shadow-xl",children:e.jsx("span",{className:"text-4xl",children:"âœ¨"})})}),e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:r?"Â¡Hasta pronto! ðŸ‘‹":"Â¡Bienvenido a Daylo!"}),e.jsx("p",{className:"text-gray-600",children:r?"Gracias por usar Daylo. Â¿Quieres ingresar con otro usuario?":"Tu diario personal en la nube"})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Â¿CÃ³mo te llamas?"}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:n,onChange:f=>c(f.target.value),onKeyPress:f=>{var D;return f.key==="Enter"&&((D=document.getElementById("email-input"))==null?void 0:D.focus())},placeholder:"Tu nombre",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-pastel-purple focus:outline-none transition-colors text-lg",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Â¿CuÃ¡l es tu correo?"}),e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{id:"email-input",type:"email",value:d,onChange:f=>{p(f.target.value),u("")},onKeyPress:f=>f.key==="Enter"&&O(),placeholder:"tu@correo.com",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-pastel-purple focus:outline-none transition-colors text-lg"})]})]}),j&&e.jsx(l.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center",children:j}),e.jsx(l.button,{onClick:O,disabled:!n.trim()||!d.trim()||g,className:"w-full py-4 rounded-2xl font-bold text-lg bg-gradient-to-r from-pastel-pink to-pastel-purple text-gray-800 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:n.trim()&&d.trim()&&!g?1.02:1},whileTap:{scale:n.trim()&&d.trim()&&!g?.98:1},children:g?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(l.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"â³"}),"Verificando..."]}):r?"ðŸ” Ingresar con otro usuario":"âœ¨ Comenzar"})]}),r&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-purple-50 rounded-xl text-center",children:e.jsx("p",{className:"text-sm text-purple-700",children:"ðŸ’œ Tu sesiÃ³n se cerrÃ³ correctamente"})})]})})]})}),e.jsx(R,{children:b&&e.jsx(tr,{onConfirm:v,onCancel:()=>S(!1)})})]})}const rr=x.lazy(()=>U(()=>import("./Dashboard-j5BZyfHq.js"),__vite__mapDeps([0,1,2,3,4,5]))),or=x.lazy(()=>U(()=>import("./Profile-Bu6M-tkj.js"),__vite__mapDeps([6,1,2,3,5]))),sr=x.lazy(()=>U(()=>import("./Calendar-BprD0AbH.js"),__vite__mapDeps([7,1,2,3,5])));function nr(){return e.jsx(Ze,{children:e.jsx(Xe,{children:e.jsxs(te,{path:"/",element:e.jsx(ar,{}),children:[e.jsx(te,{index:!0,element:e.jsx(et,{to:"/hoy",replace:!0})}),e.jsx(te,{path:"hoy",element:e.jsx(Ua,{})}),e.jsx(te,{path:"dashboard",element:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando..."})]})}),children:e.jsx(rr,{})})}),e.jsx(te,{path:"calendario",element:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando..."})]})}),children:e.jsx(sr,{})})}),e.jsx(te,{path:"perfil",element:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando..."})]})}),children:e.jsx(or,{})})})]})})})}he.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(nr,{})}));export{ra as A,tr as L,Na as a,er as b,Qa as c,Va as d,de as f,ba as g,Ma as s,Ga as t,H as u};
