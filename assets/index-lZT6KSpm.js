const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DGIYabs6.js","assets/animation-ClZgCcJJ.js","assets/react-vendor-BAfStBEd.js","assets/icons-Bh_7iz_t.js","assets/charts-BCRNSYNv.js","assets/firebase-aA-GX0nH.js","assets/Profile-BwAkr39c.js"])))=>i.map(i=>d[i]);
import{j as e,m as c,A}from"./animation-ClZgCcJJ.js";import{a as Be,r as p,g as We,R as Ce,N as Je,O as Ue,H as Ke,b as Ye,d as ae,e as Xe}from"./react-vendor-BAfStBEd.js";import{H as be,P as Ze,U as et,M as tt,B as at,a as st,D as rt,b as Ae,c as ot,d as we,X as ve,C as je,e as Ne,f as _e,g as it,S as $,h as nt,i as Se,j as lt,k as ct,T as dt,l as ut,m as mt,n as $e,L as pt,o as xt}from"./icons-Bh_7iz_t.js";import{i as ht,g as gt,c as X,q as ue,w as Q,o as K,a as me,T as re,b as Oe,d as pe,s as Fe,e as He}from"./firebase-aA-GX0nH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();var fe={},Ee=Be;fe.createRoot=Ee.createRoot,fe.hydrateRoot=Ee.hydrateRoot;const yt="modulepreload",ft=function(s){return"/daylo-app/"+s},Ie={},U=function(t,a,i){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),l=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(a.map(m=>{if(m=ft(m),m in Ie)return;Ie[m]=!0;const y=m.endsWith(".css"),h=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const u=document.createElement("link");if(u.rel=y?"stylesheet":yt,y||(u.as="script"),u.crossOrigin="",u.href=m,l&&u.setAttribute("nonce",l),document.head.appendChild(u),y)return new Promise((v,x)=>{u.addEventListener("load",v),u.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function r(n){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n}return o.then(n=>{for(const l of n||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},bt={},ke=s=>{let t;const a=new Set,i=(h,u)=>{const v=typeof h=="function"?h(t):h;if(!Object.is(v,t)){const x=t;t=u??(typeof v!="object"||v===null)?v:Object.assign({},t,v),a.forEach(j=>j(t,x))}},o=()=>t,m={setState:i,getState:o,getInitialState:()=>y,subscribe:h=>(a.add(h),()=>a.delete(h)),destroy:()=>{(bt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},y=t=s(i,o,m);return m},vt=s=>s?ke(s):ke;var Pe={exports:{}},qe={},ze={exports:{}},Re={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=p;function jt(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var wt=typeof Object.is=="function"?Object.is:jt,Nt=Y.useState,St=Y.useEffect,Et=Y.useLayoutEffect,It=Y.useDebugValue;function kt(s,t){var a=t(),i=Nt({inst:{value:a,getSnapshot:t}}),o=i[0].inst,r=i[1];return Et(function(){o.value=a,o.getSnapshot=t,ge(o)&&r({inst:o})},[s,a,t]),St(function(){return ge(o)&&r({inst:o}),s(function(){ge(o)&&r({inst:o})})},[s]),It(a),a}function ge(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!wt(s,a)}catch{return!0}}function Tt(s,t){return t()}var Dt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tt:kt;Re.useSyncExternalStore=Y.useSyncExternalStore!==void 0?Y.useSyncExternalStore:Dt;ze.exports=Re;var Ct=ze.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe=p,At=Ct;function _t(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var $t=typeof Object.is=="function"?Object.is:_t,Ot=At.useSyncExternalStore,Ft=xe.useRef,Ht=xe.useEffect,Pt=xe.useMemo,qt=xe.useDebugValue;qe.useSyncExternalStoreWithSelector=function(s,t,a,i,o){var r=Ft(null);if(r.current===null){var n={hasValue:!1,value:null};r.current=n}else n=r.current;r=Pt(function(){function m(x){if(!y){if(y=!0,h=x,x=i(x),o!==void 0&&n.hasValue){var j=n.value;if(o(j,x))return u=j}return u=x}if(j=u,$t(h,x))return j;var w=i(x);return o!==void 0&&o(j,w)?(h=x,j):(h=x,u=w)}var y=!1,h,u,v=a===void 0?null:a;return[function(){return m(t())},v===null?void 0:function(){return m(v())}]},[t,a,i,o]);var l=Ot(s,r[0],r[1]);return Ht(function(){n.hasValue=!0,n.value=l},[l]),qt(l),l};Pe.exports=qe;var zt=Pe.exports;const Rt=We(zt),Me={},{useDebugValue:Mt}=Ce,{useSyncExternalStoreWithSelector:Lt}=Rt;let Te=!1;const Vt=s=>s;function Qt(s,t=Vt,a){(Me?"production":void 0)!=="production"&&a&&!Te&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Te=!0);const i=Lt(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,a);return Mt(i),i}const De=s=>{(Me?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?vt(s):s,a=(i,o)=>Qt(t,i,o);return Object.assign(a,t),a},Gt=s=>s?De(s):De,C=Gt((s,t)=>({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,isModalOpen:!1,hasCompletedCheckIn:!1,lastActiveDate:new Date().toISOString().split("T")[0],activityHistory:JSON.parse(localStorage.getItem("daylo-activity-history")||"[]"),timeHistory:JSON.parse(localStorage.getItem("daylo-time-history")||"[]"),addActivity:a=>{s(i=>{const o=[...i.selectedActivities,a],r=o.reduce((n,l)=>n+l.duration,0);return t().logActivity(a),t().logTime(a),{selectedActivities:o,totalMinutes:r,currentEntry:{...i.currentEntry,activities:o}}}),console.log("ðŸ’¾ Actividad agregada, guardando..."),setTimeout(()=>t().autoSave(),100)},removeActivity:a=>{s(i=>{const o=i.selectedActivities.filter(n=>n.id!==a),r=o.reduce((n,l)=>n+l.duration,0);return{selectedActivities:o,totalMinutes:r,currentEntry:{...i.currentEntry,activities:o}}})},updateActivityDuration:(a,i)=>{s(o=>{const r=o.selectedActivities.map(l=>{if(l.id===a){const m={...l,duration:i};return t().logTime(m),m}return l}),n=r.reduce((l,m)=>l+m.duration,0);return{selectedActivities:r,totalMinutes:n,currentEntry:{...o.currentEntry,activities:r}}})},updateActivityFacets:(a,i,o)=>{s(r=>{const n=r.selectedActivities.map(l=>{if(l.id===a){const m={...l,facets:i,notes:o};return t().logActivity(m),m}return l});return{selectedActivities:n,currentEntry:{...r.currentEntry,activities:n}}})},updateActivityEnergy:(a,i)=>{s(o=>{const r=o.selectedActivities.map(n=>n.id===a?{...n,energyImpact:i}:n);return{selectedActivities:r,currentEntry:{...o.currentEntry,activities:r}}})},setReflection:a=>{s(i=>({currentEntry:{...i.currentEntry,reflection:{...i.currentEntry.reflection,...a}}}))},addTask:(a,i=!1,o=!1)=>{s(r=>{const n={id:Date.now().toString(),text:a,completed:!1,createdAt:new Date,isPriority:i,isPersonal:o},l=[...r.currentEntry.tasks||[],n];return{currentEntry:{...r.currentEntry,tasks:l}}}),console.log("ðŸ“ Tarea agregada, guardando..."),setTimeout(()=>t().autoSave(),100)},toggleTask:a=>{s(i=>{const o=(i.currentEntry.tasks||[]).map(r=>r.id===a?{...r,completed:!r.completed}:r);return{currentEntry:{...i.currentEntry,tasks:o}}}),setTimeout(()=>t().autoSave(),100)},removeTask:a=>{s(i=>{const o=(i.currentEntry.tasks||[]).filter(r=>r.id!==a);return{currentEntry:{...i.currentEntry,tasks:o}}})},setEmotionalCheckIn:a=>{s(i=>({currentEntry:{...i.currentEntry,emotionalCheckIn:a}}))},setDayIntention:a=>{s(i=>({currentEntry:{...i.currentEntry,dayIntention:a}}))},setDayStory:a=>{s(i=>({currentEntry:{...i.currentEntry,dayStory:a}}))},completeCheckIn:()=>{s({hasCompletedCheckIn:!0});const a=new Date().toISOString().split("T")[0];localStorage.setItem("daylo-last-checkin",a)},setDiaryNote:a=>{s(i=>({currentEntry:{...i.currentEntry,diaryNote:a}})),setTimeout(()=>t().autoSave(),500)},saveEntry:()=>{const i={...t().currentEntry,id:Date.now().toString(),date:new Date},o=JSON.parse(localStorage.getItem("daylo-entries")||"[]");o.push(i),localStorage.setItem("daylo-entries",JSON.stringify(o)),t().resetEntry()},resetEntry:()=>{const a=new Date().toISOString().split("T")[0];s({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,hasCompletedCheckIn:!1,lastActiveDate:a}),localStorage.removeItem("daylo-last-checkin")},checkAndResetIfNewDay:()=>{const a=t(),i=new Date().toISOString().split("T")[0];return(a.lastActiveDate||i)!==i?(console.log("ðŸŒ… Nuevo dÃ­a detectado - reseteando datos"),t().resetEntry(),!0):!1},autoSave:async()=>{const a=t(),i=new Date().toISOString().split("T")[0];s({lastActiveDate:i});const o={id:a.currentEntry.id||Date.now().toString(),date:new Date,activities:a.selectedActivities,tasks:a.currentEntry.tasks||[],diaryNote:a.currentEntry.diaryNote||"",emotionalCheckIn:a.currentEntry.emotionalCheckIn,dayIntention:a.currentEntry.dayIntention,dayStory:a.currentEntry.dayStory,reflection:a.currentEntry.reflection},r=JSON.parse(localStorage.getItem("daylo-entries")||"[]"),n=r.findIndex(l=>new Date(l.date).toISOString().split("T")[0]===i);n>=0?r[n]=o:r.push(o),localStorage.setItem("daylo-entries",JSON.stringify(r));try{if(!localStorage.getItem("daylo-user-email")){console.warn("âš ï¸ No hay email de usuario - saltando guardado en Firebase"),console.log("ðŸ’¾ Datos guardados solo en localStorage");return}const{saveDailyEntry:m}=await U(async()=>{const{saveDailyEntry:y}=await Promise.resolve().then(()=>ye);return{saveDailyEntry:y}},void 0);await m(o),console.log("âœ… Auto-guardado en Firebase exitoso")}catch(l){console.error("âš ï¸ Error auto-guardando en Firebase (datos seguros en local):",l)}},setModalOpen:a=>{s({isModalOpen:a})},logActivity:a=>{const i={id:Date.now().toString(),activityIcon:a.icon,activityLabel:a.label,duration:a.duration,facets:a.facets,notes:a.notes,energyImpact:a.energyImpact,timestamp:new Date,date:new Date().toISOString().split("T")[0]};s(o=>{const r=[...o.activityHistory,i];return localStorage.setItem("daylo-activity-history",JSON.stringify(r)),U(async()=>{const{saveActivityLog:n}=await Promise.resolve().then(()=>ye);return{saveActivityLog:n}},void 0).then(({saveActivityLog:n})=>{n(i).catch(l=>console.error("Error guardando activity log en Firebase:",l))}),{activityHistory:r}})},logTime:a=>{const i={id:Date.now().toString(),activityIcon:a.icon,activityLabel:a.label,duration:a.duration,timestamp:new Date,date:new Date().toISOString().split("T")[0]};s(o=>{const r=[...o.timeHistory,i];return localStorage.setItem("daylo-time-history",JSON.stringify(r)),U(async()=>{const{saveTimeLog:n}=await Promise.resolve().then(()=>ye);return{saveTimeLog:n}},void 0).then(({saveTimeLog:n})=>{n(i).catch(l=>console.error("Error guardando time log en Firebase:",l))}),{timeHistory:r}})},getActivityHistory:(a=30)=>{const i=t(),o=new Date;return o.setDate(o.getDate()-a),i.activityHistory.filter(r=>new Date(r.date)>=o)},getTimeHistory:(a=30)=>{const i=t(),o=new Date;return o.setDate(o.getDate()-a),i.timeHistory.filter(r=>new Date(r.date)>=o)},resetStore:()=>{s({currentEntry:{date:new Date,activities:[],tasks:[],diaryNote:"",emotionalCheckIn:void 0,dayIntention:void 0,dayStory:void 0,reflection:{highlights:"",mood:"ðŸ˜Š",dayRating:3}},selectedActivities:[],totalMinutes:0,isModalOpen:!1,hasCompletedCheckIn:!1,lastActiveDate:new Date().toISOString().split("T")[0],activityHistory:[],timeHistory:[]}),console.log("ðŸ”„ Store reseteado por logout")}})),Bt=Object.freeze(Object.defineProperty({__proto__:null,useDayloStore:C},Symbol.toStringTag,{value:"Module"})),Wt=[{id:"work",label:"Productividad",color:"#C4E5FF",defaultDuration:360},{id:"study",label:"Estudio",color:"#E8D4FF",defaultDuration:240},{id:"home",label:"Hogar",color:"#FFD4E5",defaultDuration:180},{id:"exercise",label:"Ejercicio",color:"#D4FFE5",defaultDuration:60},{id:"social",label:"Social",color:"#FFE5D4",defaultDuration:120},{id:"hobbies",label:"Hobbies",color:"#FFF4D4",defaultDuration:90},{id:"food",label:"Comida",color:"#FFE5D4",defaultDuration:90},{id:"sleep",label:"Descanso",color:"#E8D4FF",defaultDuration:480},{id:"health",label:"Salud",color:"#D4FFE5",defaultDuration:60}],Jt={work:[{id:"progress",label:"Â¿Avanzaste en algo importante?",type:"boolean"},{id:"control",label:"Â¿Te sentiste en control?",type:"boolean"},{id:"work_value",label:"Â¿Valor de lo realizado?",type:"rating"}],study:[{id:"learned_new",label:"Â¿Aprendiste algo nuevo?",type:"boolean"},{id:"can_explain",label:"Â¿PodrÃ­as explicarlo?",type:"boolean"},{id:"usefulness",label:"Â¿QuÃ© tan Ãºtil fue?",type:"rating"}],home:[{id:"space_better",label:"Â¿Tu espacio estÃ¡ mejor?",type:"boolean"},{id:"did_necessary",label:"Â¿Hiciste lo necesario?",type:"boolean"},{id:"how_feel",label:"Â¿CÃ³mo te sientes ahora?",type:"rating"}],exercise:[{id:"healthy_challenge",label:"Â¿Te desafiaste sanamente?",type:"boolean"},{id:"pain_discomfort",label:"Â¿Dolor o molestia?",type:"boolean"},{id:"enjoyed",label:"Â¿Disfrutaste la actividad?",type:"boolean"}],social:[{id:"authentic",label:"Â¿ConversaciÃ³n autÃ©ntica?",type:"boolean"},{id:"emotional_impact",label:"Â¿Impacto emocional?",type:"rating"},{id:"added_value",label:"Â¿AgregÃ³ valor a tu dÃ­a?",type:"boolean"}],hobbies:[{id:"lost_track_time",label:"Â¿Perdiste nociÃ³n del tiempo?",type:"boolean"},{id:"enjoyed_process",label:"Â¿Disfrutaste el proceso?",type:"boolean"},{id:"recharged",label:"Â¿Te recargÃ³ energÃ­a?",type:"boolean"}],food:[{id:"nourished_well",label:"Â¿Te nutriste bien?",type:"boolean"},{id:"taste_quality",label:"Â¿Sabor y presentaciÃ³n?",type:"rating"},{id:"listened_body",label:"Â¿Escuchaste tu cuerpo?",type:"boolean"}],sleep:[{id:"hours_amount",label:"Â¿Cantidad de horas?",type:"rating"},{id:"slept_deeply",label:"Â¿Dormiste profundamente?",type:"boolean"},{id:"ready_for_day",label:"Â¿Listo para el dÃ­a?",type:"boolean"}],health:[{id:"physical_feeling",label:"Â¿CÃ³mo te sientes fÃ­sicamente?",type:"rating"},{id:"health_stable",label:"Â¿Tu salud estÃ¡ estable?",type:"boolean"},{id:"did_something",label:"Â¿Hiciste algo por tu salud?",type:"boolean"}]},Ut=s=>{const a=[...Jt[s]||[]];for(let i=a.length-1;i>0;i--){const o=Math.floor(Math.random()*(i+1));[a[i],a[o]]=[a[o],a[i]]}return a},de=s=>{const t=Math.floor(s/60),a=s%60;return t===0?`${a}m`:a===0?`${t}h`:`${t}h ${a}m`},Kt={work:ot,home:Ae,exercise:rt,social:st,study:at,sleep:tt,food:et,hobbies:Ze,health:be};function Yt({type:s,size:t=32,animate:a=!1,color:i="#667085"}){const o=Kt[s];return e.jsx(c.div,{initial:a?{scale:0,rotate:-180}:{},animate:a?{scale:1,rotate:0,transition:{type:"spring",stiffness:260,damping:20}}:{},whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},children:e.jsx(o,{size:t,color:i,strokeWidth:2.5})})}function Xt({activity:s,isSelected:t,onToggle:a}){const[i,o]=p.useState(!1);return e.jsxs(c.button,{onClick:a,onTapStart:()=>o(!0),onTap:()=>o(!1),onTapCancel:()=>o(!1),className:`daylo-icon-card w-full aspect-square ${t?"selected":""}`,style:{backgroundColor:t?s.color:`${s.color}40`,borderColor:s.color},whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{boxShadow:[`0 0 0 0 ${s.color}40`,`0 0 0 8px ${s.color}00`]}:{},transition:{duration:.3},children:[e.jsx(c.div,{animate:t?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},transition:{duration:.5},children:e.jsx(Yt,{type:s.id,size:40,animate:i,color:t?"#374151":"#6B7280"})}),e.jsx("span",{className:"text-sm font-semibold mt-2 text-gray-700",children:s.label}),t&&e.jsx(c.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg",children:"âœ“"})]})}function Zt({label:s,value:t,onChange:a,min:i=0,max:o=720,step:r=15,color:n="#C4E5FF",icon:l}){const[m,y]=p.useState(!1),[h,u]=p.useState(!1),[v,x]=p.useState(!0),j=(t-i)/(o-i)*100;p.useEffect(()=>{const k=setTimeout(()=>x(!1),5e3);return()=>clearTimeout(k)},[]);const w=k=>{a(k),h||(u(!0),x(!1))},f=()=>{y(!0),x(!1),u(!0)},b=()=>{y(!1)};return e.jsxs(c.div,{className:"w-full space-y-3 relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx("div",{className:"text-gray-600",children:l}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:s}),e.jsx(A,{children:v&&!h&&e.jsxs(c.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex items-center gap-1 mt-1",children:[e.jsx(we,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"text-[10px] text-purple-600 font-medium",children:"Desliza para ajustar"})]})})]})]}),e.jsx(c.div,{className:"flex items-center gap-2",animate:m?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:e.jsx(c.span,{className:"text-2xl font-black bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",animate:m?{scale:[1,1.15,1]}:{},children:de(t)})})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative h-8 bg-gradient-to-r from-gray-100 via-gray-200 to-gray-100 rounded-full overflow-visible shadow-inner",children:[Array.from({length:Math.floor(o/180)+1}).map((k,D)=>{const O=D*3,S=O*60/o*100;return S>100?null:e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-300 opacity-60",style:{left:`${S}%`},children:e.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-[9px] text-gray-400 font-medium",children:[O,"h"]})},D)}),e.jsx(c.div,{className:"absolute top-0 bottom-0 left-0 rounded-full shadow-md",style:{width:`${j}%`,background:`linear-gradient(90deg, ${n}, ${n}dd)`},initial:!1,animate:{width:`${j}%`},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx(c.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 rounded-full",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})}),e.jsx("input",{type:"range",min:i,max:o,step:r,value:t,onChange:k=>w(Number(k.target.value)),onMouseDown:f,onMouseUp:b,onTouchStart:f,onTouchEnd:b,className:"absolute w-full h-full opacity-0 cursor-grab active:cursor-grabbing z-10",style:{margin:0}}),e.jsxs(c.div,{className:"absolute top-1/2 -translate-y-1/2 pointer-events-none z-20",style:{left:`${j}%`,transform:"translate(-50%, -50%)"},animate:{scale:m?1.4:v&&!h?[1,1.1,1]:1},transition:{scale:v&&!h?{duration:1.5,repeat:1/0,ease:"easeInOut"}:{duration:.2}},children:[e.jsx(c.div,{className:"absolute inset-0 rounded-full",style:{backgroundColor:n},animate:{scale:m?[1,1.8,1]:1,opacity:m?[.3,0,.3]:.3},transition:{duration:.6,repeat:m?1/0:0}}),e.jsx("div",{className:"relative w-7 h-7 rounded-full shadow-xl border-4 border-white flex items-center justify-center",style:{backgroundColor:n},children:e.jsx(A,{children:v&&!h&&e.jsx(c.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:e.jsx(we,{className:"w-3 h-3 text-white"})})})})]})]})}),e.jsxs("div",{className:"flex justify-between text-xs font-medium px-1",children:[e.jsx("span",{className:"text-gray-500",children:de(i)}),e.jsx("span",{className:"text-gray-400",children:de(o/2)}),e.jsx("span",{className:"text-gray-500",children:de(o)})]}),m&&e.jsx(c.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-center",children:e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"ðŸ‘ Ajustando tiempo..."})})]})}function ea({isOpen:s,onClose:t,children:a,color:i,title:o}){return e.jsx(A,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40"}),e.jsx(c.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-x-0 bottom-0 z-50 flex flex-col max-h-[85vh]",children:e.jsxs("div",{className:"bg-white rounded-t-3xl shadow-2xl flex flex-col overflow-hidden",style:{borderTopColor:i,borderTopWidth:"4px",height:"100%"},children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:"flex items-center justify-between px-6 pb-4 border-b border-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:o}),e.jsx(c.button,{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(ve,{size:24,className:"text-gray-600"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1 pb-32 overscroll-contain",children:a})]})})]})})}function ta({emoji:s,label:t,value:a,onChange:i,color:o}){const r=[1,2,3,4,5];return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s&&e.jsx("span",{className:"text-3xl",children:s}),e.jsx("h3",{className:"text-base font-semibold text-gray-700 flex-1",children:t})]}),e.jsx("div",{className:"flex justify-between gap-2",children:r.map(n=>e.jsx(c.button,{onClick:()=>i(n),className:`w-full py-3 rounded-xl font-bold text-lg transition-all ${a===n?"shadow-lg scale-105":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,style:{backgroundColor:a===n?o:void 0,color:a===n?"#374151":void 0},whileHover:{scale:a===n?1.05:1.02},whileTap:{scale:.95},children:n},n))}),e.jsxs("div",{className:"flex justify-between mt-2 px-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Bajo"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Alto"})]})]})}function aa({emoji:s,label:t,value:a,onChange:i,color:o}){return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-md border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s&&e.jsx("span",{className:"text-3xl",children:s}),e.jsx("h3",{className:"text-base font-semibold text-gray-700 flex-1",children:t})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c.button,{onClick:()=>i(!0),className:`flex-1 py-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${a===!0?"shadow-lg scale-105":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,style:{backgroundColor:a===!0?o:void 0,color:a===!0?"#374151":void 0},whileHover:{scale:a===!0?1.05:1.02},whileTap:{scale:.95},children:[e.jsx(je,{size:20,strokeWidth:3}),"SÃ­"]}),e.jsxs(c.button,{onClick:()=>i(!1),className:`flex-1 py-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${a===!1?"bg-gray-300 text-gray-700 shadow-lg scale-105":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,whileHover:{scale:a===!1?1.05:1.02},whileTap:{scale:.95},children:[e.jsx(ve,{size:20,strokeWidth:3}),"No"]})]})]})}function sa(){const[s,t]=p.useState(""),[a,i]=p.useState(""),[o,r]=p.useState(!1),[n,l]=p.useState(null),{currentEntry:m,addTask:y,toggleTask:h,removeTask:u,autoSave:v}=C(),x=m.tasks||[],j=x.filter(g=>g.isPriority&&!g.isPersonal),w=x.find(g=>g.isPersonal),f=async g=>{if(g.preventDefault(),s.trim()&&!o){r(!0);try{const E=j.length<3;y(s.trim(),E,!1),t(""),await new Promise(H=>setTimeout(H,100)),await v(),console.log("âœ… Tarea agregada y guardada")}catch(E){console.error("âŒ Error guardando tarea:",E)}finally{r(!1)}}},b=async g=>{if(g.preventDefault(),a.trim()&&!w&&!o){r(!0);try{y(a.trim(),!1,!0),i(""),await new Promise(E=>setTimeout(E,100)),await v(),console.log("âœ… AcciÃ³n personal agregada y guardada")}catch(E){console.error("âŒ Error guardando acciÃ³n:",E)}finally{r(!1)}}},k=async g=>{if(!n){l(g);try{h(g),await new Promise(E=>setTimeout(E,100)),await v(),console.log("âœ… Tarea marcada y guardada")}catch(E){console.error("âŒ Error guardando cambio de tarea:",E)}finally{l(null)}}},D=async g=>{if(!n){l(g);try{u(g),await new Promise(E=>setTimeout(E,100)),await v(),console.log("âœ… Tarea eliminada y guardada")}catch(E){console.error("âŒ Error eliminando tarea:",E)}finally{l(null)}}},O=x.filter(g=>g.completed).length,S=j.length<3,V=g=>e.jsxs(c.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,x:-100},className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${g.completed?"bg-green-50 border-green-200":g.isPriority?"bg-purple-50 border-purple-200 hover:border-purple-300":g.isPersonal?"bg-pink-50 border-pink-200 hover:border-pink-300":"bg-gray-50 border-gray-200 hover:border-purple-300"}`,children:[e.jsx("button",{onClick:()=>k(g.id),disabled:n===g.id,className:`flex-shrink-0 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all relative ${g.completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-purple-400"} ${n===g.id?"opacity-70 cursor-not-allowed":""}`,children:n===g.id?e.jsx(c.div,{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}):g.completed?e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:e.jsx(je,{className:"w-4 h-4 text-white",strokeWidth:3})}):null}),e.jsx("span",{className:`flex-1 text-sm ${g.completed?"line-through text-gray-400":"text-gray-700 font-medium"}`,children:g.text}),e.jsx("button",{onClick:()=>D(g.id),disabled:n===g.id,className:`flex-shrink-0 w-6 h-6 rounded-lg hover:bg-red-100 flex items-center justify-center text-gray-400 hover:text-red-500 transition-colors ${n===g.id?"opacity-50 cursor-not-allowed":""}`,children:e.jsx(ve,{className:"w-4 h-4"})})]},g.id);return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:"ðŸŽ¯ MÃ¡ximo 3 prioridades"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Menos es mÃ¡s. EnfÃ³cate en lo que realmente importa"})]}),j.length>=3&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-lg font-medium",children:"Completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{mode:"popLayout",children:j.map(V)}),j.length===0&&e.jsx("div",{className:"text-center py-6 border-2 border-dashed border-purple-200 rounded-xl bg-purple-50/30",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Â¿QuÃ© 3 cosas moverÃ­an la aguja hoy?"})})]}),S&&e.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:g=>t(g.target.value),placeholder:`Prioridad ${j.length+1}...`,className:"flex-1 px-3 py-2.5 rounded-xl border-2 border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm bg-purple-50/30",maxLength:100}),e.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-3 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[44px]",children:e.jsx(Ne,{className:"w-5 h-5"})})]}),!S&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 bg-purple-50 rounded-xl border border-purple-200",children:e.jsx("p",{className:"text-xs text-purple-700 text-center",children:"âœ¨ Perfecto. MÃ¡s de 3 prioridades reduce tu probabilidad de completarlas en 50%"})})]}),e.jsxs("div",{className:"space-y-3 border-t-2 border-gray-100 pt-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:"ðŸ’š 1 AcciÃ³n para ti"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:'Algo que cuide tu bienestar, aunque "no sea productivo"'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{mode:"popLayout",children:w&&V(w)}),!w&&e.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-pink-200 rounded-xl bg-pink-50/30",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Â¿QuÃ© te harÃ­a bien hoy?"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Caminar, descansar, llamar a alguien..."})]})]}),!w&&e.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:g=>i(g.target.value),placeholder:"Ej: Caminar 10 min, desconectar...",className:"flex-1 px-3 py-2.5 rounded-xl border-2 border-pink-200 focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm bg-pink-50/30",maxLength:100}),e.jsx("button",{type:"submit",disabled:!a.trim(),className:"px-3 py-2.5 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[44px]",children:e.jsx(Ne,{className:"w-5 h-5"})})]})]}),x.length>0&&O===x.length&&e.jsx(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:e.jsx("p",{className:"text-sm text-green-700 font-medium text-center",children:"ðŸŽ‰ Â¡Completaste todas tus tareas! Â¡Excelente trabajo!"})})]})}function ra({timeContext:s}){const{currentEntry:t,setDiaryNote:a,autoSave:i}=C(),o=t.diaryNote||"",[r,n]=p.useState(!1),[l,m]=p.useState(!1),[y,h]=p.useState(!1);p.useEffect(()=>{if(o){const f=setTimeout(()=>{i()},1e3);return()=>clearTimeout(f)}},[o,i]);const u=async()=>{m(!0);try{await i(),h(!0),setTimeout(()=>h(!1),2e3)}catch(f){console.error("Error guardando nota:",f)}finally{m(!1)}},x=s==="morning"?{title:"ðŸ“ Notas para hoy",placeholder:`Anota lo que quieras: ideas, intenciones, cÃ³mo te sientes, recordatorios...

Este es tu espacio libre para escribir lo que necesites.`,emoji:"âœ¨"}:s==="afternoon"?{title:"ðŸ“ Notas del dÃ­a",placeholder:`Escribe lo que quieras: pensamientos, ideas, algo que pasÃ³, cÃ³mo te sientes...

Sin lÃ­mites, sin filtros. Tu espacio personal.`,emoji:"ðŸ’­"}:{title:"ðŸ“ Notas del dÃ­a",placeholder:`AquÃ­ puedes escribir lo que quieras: reflexiones, versos, ideas sueltas, lo que viviste...

Tu espacio seguro para expresarte.`,emoji:"ðŸ“–"},j=o.length,w=1e3;return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl border-2 border-purple-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>n(!r),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-purple-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:x.title}),e.jsx("p",{className:"text-sm text-purple-600",children:o?`${o.split(/\s+/).filter(f=>f.length>0).length} palabras escritas`:"Tu espacio personal"})]})]}),e.jsx(c.div,{animate:{rotate:r?180:0},transition:{duration:.3},children:e.jsx(it,{className:"w-6 h-6 text-purple-500"})})]}),e.jsx(A,{children:r&&e.jsx(c.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t-2 border-purple-100",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50/50 to-pink-50/50",children:[!o&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 p-3 bg-white/80 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-purple-700",children:[s==="morning"&&"Comenzar el dÃ­a escribiendo tus pensamientos te ayuda a tener claridad mental",s==="afternoon"&&"Tomarte un momento para reflexionar puede cambiar el rumbo de tu dÃ­a",s==="evening"&&"Escribir antes de dormir te ayuda a procesar el dÃ­a y descansar mejor"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:o,onChange:f=>a(f.target.value),placeholder:x.placeholder,maxLength:w,className:"w-full h-56 p-4 rounded-xl border-2 border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm text-gray-700 placeholder:text-gray-400 bg-white",style:{lineHeight:"1.6"}}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white px-2 py-1 rounded-lg",children:[j,"/",w]})]}),o&&e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 flex justify-between text-xs text-purple-600 px-2",children:[e.jsxs("span",{children:[o.split(/\s+/).filter(f=>f.length>0).length," palabras"]}),e.jsxs("span",{children:[o.split(`
`).length," lÃ­neas"]})]}),e.jsx(c.button,{onClick:u,disabled:l||!o,className:`mt-4 w-full py-3 rounded-xl font-semibold text-sm transition-all flex items-center justify-center gap-2 ${y?"bg-green-500 text-white":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"}`,whileHover:!l&&o?{scale:1.02}:{},whileTap:!l&&o?{scale:.98}:{},children:y?e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18}),e.jsx("span",{children:"Â¡Guardado!"})]}):l?e.jsxs(e.Fragment,{children:[e.jsx(c.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{size:18}),e.jsx("span",{children:"Guardar Notas"})]})})]})})})]})}const se=[{emoji:"ðŸ˜Š",label:"Bien",color:"#D4FFE5"},{emoji:"ðŸ˜°",label:"Ansioso/a",color:"#FFE5D4"},{emoji:"ðŸ˜´",label:"Cansado/a",color:"#E8D4FF"},{emoji:"ðŸ˜¤",label:"Abrumado/a",color:"#FFD4E5"},{emoji:"ðŸ¤—",label:"Motivado/a",color:"#FFF4D4"},{emoji:"ðŸ˜",label:"Neutral",color:"#E8E8E8"}],oa=["Ansioso/a","Cansado/a","Abrumado/a"],J={"Ansioso/a":{encouragement:"Respira. Un paso a la vez. Hoy puedes enfocarte en lo que SÃ controlas.",actionQuestion:"Â¿QuÃ© PEQUEÃ‘O paso te ayudarÃ­a a sentirte mejor?",placeholder:"Ej: Hacer una lista, hablar con alguien, salir a caminar 10 minutos..."},"Cansado/a":{encouragement:"Tu cuerpo te estÃ¡ pidiendo algo. Hoy puedes ir a tu ritmo, sin culpa.",actionQuestion:"Â¿QuÃ© necesitas priorizar para cuidar tu energÃ­a?",placeholder:"Ej: Dormir temprano, delegar tareas, decir no a algo, tomar pausas..."},"Abrumado/a":{encouragement:"EstÃ¡ bien hacer menos. Â¿QuÃ© es lo MÃS importante hoy?",actionQuestion:"Si solo pudieras hacer UNA cosa hoy, Â¿cuÃ¡l serÃ­a?",placeholder:"Ej: Terminar ese proyecto, hablar con mi jefe, descansar sin culpa..."},Bien:{encouragement:"âœ¨ Â¡Aprovecha esta energÃ­a! Â¿En quÃ© quieres enfocarla hoy?",actionQuestion:"Â¿QuÃ© quieres lograr o cÃ³mo quieres sentirte al final del dÃ­a?",placeholder:"Ej: Avanzar en mis proyectos, conectar con otros, mantener este equilibrio..."},"Motivado/a":{encouragement:"ðŸ”¥ Ese impulso es oro. Â¿QuÃ© quieres lograr hoy?",actionQuestion:"Â¿En quÃ© vas a canalizar esta motivaciÃ³n?",placeholder:"Ej: Empezar ese proyecto, aprender algo nuevo, hacer ejercicio, crear..."},Neutral:{encouragement:"Un dÃ­a equilibrado es un buen punto de partida. Â¿CÃ³mo quieres sentirte al cerrarlo?",actionQuestion:"Â¿QuÃ© le darÃ­a sentido a tu dÃ­a de hoy?",placeholder:"Ej: Completar tareas pendientes, tener un momento para mÃ­, conectar con alguien..."}},z=[{key:"currentGoal",emoji:"ðŸŽ¯",question:"Â¿QuÃ© quieres cambiar o lograr ahora mismo en tu vida?",placeholder:"Ej: Mejorar mi salud, cambiar de trabajo, fortalecer mis relaciones..."},{key:"futureVision",emoji:"âœ¨",question:"Â¿CÃ³mo quieres que sea tu vida en los prÃ³ximos aÃ±os?",placeholder:"Ej: Ser mÃ¡s independiente, tener un mejor equilibrio, sentirme realizado/a..."},{key:"mainObstacle",emoji:"ðŸš§",question:"Â¿QuÃ© es lo que mÃ¡s te frena hoy?",placeholder:"Ej: La falta de tiempo, el miedo, la incertidumbre, la procrastinaciÃ³n..."}];function ia({onComplete:s,isNewUser:t=!1}){var _,Z,M,ee,ie,ne,le,ce,he,te;const{setEmotionalCheckIn:a,setDayIntention:i,autoSave:o}=C(),[r,n]=p.useState(1),[l,m]=p.useState(""),[y,h]=p.useState(""),[u,v]=p.useState(""),[x,j]=p.useState(""),[w,f]=p.useState(""),[b,k]=p.useState(""),[D,O]=p.useState(""),S=oa.includes(l),V=t?5:S?3:2,g=async()=>{if(r===1&&l){a({feeling:l});const d=localStorage.getItem("daylo-user-email");console.log("ðŸ“§ Email usuario:",d),await o(),console.log("âœ… Paso 1 guardado - EmociÃ³n:",l),n(2)}else if(r===2&&t&&y.trim())a({feeling:l,currentGoal:y.trim()}),await o(),console.log("âœ… Paso 2 guardado - Objetivo actual:",y),n(3);else if(r===3&&t&&u.trim())a({feeling:l,currentGoal:y.trim(),futureVision:u.trim()}),await o(),console.log("âœ… Paso 3 guardado - VisiÃ³n futura:",u),n(4);else if(r===4&&t&&x.trim())a({feeling:l,currentGoal:y.trim(),futureVision:u.trim(),mainObstacle:x.trim()}),await o(),console.log("âœ… Paso 4 guardado - ObstÃ¡culo principal:",x),n(5);else if(r===2&&!t&&!S&&b.trim())a({feeling:l,actionIntention:b.trim()}),await o(),console.log("âœ… Check-in completo (positivo):",{feeling:l,actionIntention:b}),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),s();else if(r===2&&!t&&S)a({feeling:l,shareThoughts:w.trim()||void 0}),await o(),console.log("âœ… Paso 2 guardado (negativo):",{feeling:l,shareThoughts:w}),n(3);else if(r===3&&!t&&S&&b.trim())a({feeling:l,shareThoughts:w.trim()||void 0,actionIntention:b.trim()}),await o(),console.log("âœ… Check-in completo (negativo):",{feeling:l,shareThoughts:w,actionIntention:b}),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),s();else if(r===5&&t&&D){const d={feeling:l,currentGoal:y.trim()||void 0,futureVision:u.trim()||void 0,mainObstacle:x.trim()||void 0};a(d),i(D),await new Promise(N=>setTimeout(N,200)),await o(),console.log("âœ… Check-in completo guardado:",{...d,intention:D}),console.log("ðŸ” Verifica Firebase en: dailyEntries/"+localStorage.getItem("daylo-user-email")+"_"+new Date().toISOString().split("T")[0]),s()}},E=l!=="",H=t?y.trim()!=="":S?!0:b.trim()!=="",G=t?u.trim()!=="":b.trim()!=="",R=x.trim()!=="",B=D.trim()!=="",oe=()=>r===1?"ðŸ’­ Hola, bienvenido/a":r===2&&!t&&S?"ðŸ’­ Quieres compartir algo?":r===2&&!t&&!S?"âœ¨ Tu intenciÃ³n de hoy":r===3&&!t?"ðŸŽ¯ Tu intenciÃ³n de hoy":r===2&&t?"ðŸŽ¯ Tu objetivo actual":r===3&&t?"âœ¨ Tu visiÃ³n futura":r===4&&t?"ðŸš§ Tus obstÃ¡culos":r===5&&t?"ðŸŒŸ Tu intenciÃ³n de hoy":"";return e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-purple-100/90 to-pink-100/90 backdrop-blur-md z-50 flex items-center justify-center p-4 pb-24",children:e.jsxs(c.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[85vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 bg-white border-b border-purple-100 px-6 py-4 rounded-t-3xl",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:oe()}),e.jsxs("p",{className:"text-xs text-purple-600",children:["Paso ",r," de ",V]})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs(A,{mode:"wait",children:[r===1&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:t?"Reconocer tus emociones es el primer paso para vivir con mÃ¡s conciencia":"Tomarte un momento para reconocer cÃ³mo te sientes te ayuda a regular tus emociones"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:"ðŸ’­ Â¿CÃ³mo te sientes ahora mismo?"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:se.map(d=>e.jsxs(c.button,{onClick:()=>m(d.label),className:`p-3 rounded-xl border-2 transition-all ${l===d.label?"border-purple-400 shadow-md scale-105":"border-gray-200 hover:border-purple-300"}`,style:{backgroundColor:l===d.label?d.color:"white"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("div",{className:"text-2xl mb-1",children:d.emoji}),e.jsx("div",{className:"text-xs font-medium text-gray-700",children:d.label})]},d.label))})]})]},"step1"),r===2&&t&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(_=se.find(d=>d.label===l))==null?void 0:_.emoji," ",l]})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Definir claramente lo que quieres cambiar es el primer paso hacia la transformaciÃ³n"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[z[0].emoji," ",z[0].question]}),e.jsx("textarea",{value:y,onChange:d=>h(d.target.value),placeholder:z[0].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ SÃ© honesto/a contigo mismo/a, esto nos ayuda a guiarte mejor"})]})]},"step2-new-user"),r===3&&t&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Quieres cambiar/lograr:"}),e.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:y})]})})}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Visualizar tu futuro ideal te ayuda a tomar mejores decisiones en el presente"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[z[1].emoji," ",z[1].question]}),e.jsx("textarea",{value:u,onChange:d=>v(d.target.value),placeholder:z[1].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ No hay respuestas correctas o incorrectas, solo tu visiÃ³n"})]})]},"step3-new-user"),r===4&&t&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Tu visiÃ³n futura:"}),e.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:u})]})})}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Reconocer lo que te frena es el primer paso para superarlo"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[z[2].emoji," ",z[2].question]}),e.jsx("textarea",{value:x,onChange:d=>j(d.target.value),placeholder:z[2].placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Identificar obstÃ¡culos es clave para trabajar en ellos"})]})]},"step4-new-user"),r===2&&!t&&S&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(Z=se.find(d=>d.label===l))==null?void 0:Z.emoji," ",l]})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"A veces expresar lo que sentimos nos ayuda a procesarlo mejor"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:"ðŸ’­ Â¿Hay algo que quieras compartir?"}),e.jsx("textarea",{value:w,onChange:d=>f(d.target.value),placeholder:"Opcional: Escribe lo que sientas, sin presiÃ³n...",className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Este campo es completamente opcional, puedes continuar sin escribir nada"})]})]},"step2-existing-negative"),r===2&&!t&&!S&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Te sientes:"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[(M=se.find(d=>d.label===l))==null?void 0:M.emoji," ",l]})]}),e.jsx(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-base font-semibold text-purple-800",children:(ee=J[l])==null?void 0:ee.encouragement})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:["ðŸŽ¯ ",(ie=J[l])==null?void 0:ie.actionQuestion]}),e.jsx("textarea",{value:b,onChange:d=>k(d.target.value),placeholder:(ne=J[l])==null?void 0:ne.placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:3,autoFocus:!0})]})]},"step2-existing-positive"),r===3&&!t&&S&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-5 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-300",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-base font-semibold text-purple-800",children:(le=J[l])==null?void 0:le.encouragement})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:["ðŸŽ¯ ",(ce=J[l])==null?void 0:ce.actionQuestion]}),e.jsx("textarea",{value:b,onChange:d=>k(d.target.value),placeholder:(he=J[l])==null?void 0:he.placeholder,className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:3,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Algo pequeÃ±o y concreto que estÃ© en tu control"})]})]},"step3-existing-negative"),r===5&&t&&e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Te sientes:"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[(te=se.find(d=>d.label===l))==null?void 0:te.emoji," ",l]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Tu obstÃ¡culo principal:"}),e.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:x})]})]})}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Una intenciÃ³n clara cambia cÃ³mo vives todo el dÃ­a. No es una tarea, es tu brÃºjula."})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:"âœ¨ Â¿CuÃ¡l es tu intenciÃ³n para hoy?"}),e.jsx("textarea",{value:D,onChange:d=>O(d.target.value),placeholder:"Ej: Hoy quiero avanzar con calma\\nHoy quiero cuidar mi energÃ­a\\nHoy quiero estar presente...",className:"w-full p-4 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent resize-none text-sm",rows:4,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:'ðŸ’¡ No es "quÃ© tienes que hacer", sino "cÃ³mo quieres sentirte" o "quÃ© quieres lograr"'})]})]},"step-final")]})})}),e.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 rounded-b-3xl shadow-lg",children:e.jsxs("div",{className:"flex gap-3",children:[r>1&&e.jsx(c.button,{onClick:()=>n(r-1),className:"px-6 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"AtrÃ¡s"}),e.jsx(c.button,{onClick:g,disabled:r===1&&!E||r===2&&!H||r===3&&!G||r===4&&!R||r===5&&!B,className:`flex-1 py-3 rounded-xl font-semibold transition-all ${r===1&&E||r===2&&H||r===3&&G||r===4&&R||r===5&&B?"bg-gradient-to-r from-purple-400 to-pink-400 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,whileHover:r===1&&E||r===2&&H||r===3&&G||r===4&&R||r===5&&B?{scale:1.02}:{},whileTap:r===1&&E||r===2&&H||r===3&&G||r===4&&R||r===5&&B?{scale:.98}:{},children:r===V?"Comenzar mi dÃ­a âœ¨":"Continuar"})]})})]})})}function na({onComplete:s}){const{setDayStory:t,autoSave:a}=C(),[i,o]=p.useState(""),[r,n]=p.useState(""),[l,m]=p.useState(""),y=async()=>{t({howStarted:i,mostSignificant:r,howClosing:l}),await new Promise(u=>setTimeout(u,100)),await a(),console.log("âœ… Historia del dÃ­a guardada"),s()},h=r.trim()!=="";return e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-indigo-100/90 to-purple-100/90 backdrop-blur-md z-50 flex items-center justify-center p-4 pb-24",children:e.jsxs(c.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[85vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 bg-white border-b border-purple-100 px-6 py-4 rounded-t-3xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-xl flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ðŸŒ™ Cuenta tu dÃ­a"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Cierre narrativo"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-purple-50 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Convertir tu dÃ­a en una historia te ayuda a procesar experiencias y consolidar recuerdos con significado emocional"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["ðŸŒ… Â¿CÃ³mo comenzÃ³ tu dÃ­a?",e.jsx("span",{className:"text-xs text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),placeholder:"Ej: DespertÃ© sin energÃ­a, pero con ganas de avanzar...",className:"w-full p-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm",maxLength:150})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["âš¡ Â¿QuÃ© fue lo mÃ¡s significativo hoy?",e.jsx("span",{className:"text-xs text-purple-600",children:"(requerido)"})]}),e.jsx("textarea",{value:r,onChange:u=>n(u.target.value),placeholder:"Ej: Una conversaciÃ³n me hizo reflexionar sobre...\\nLogrÃ© terminar algo que venÃ­a posponiendo...\\nMe di cuenta de que necesito...",className:"w-full p-3 rounded-xl border-2 border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm resize-none",rows:4,maxLength:300}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.length,"/300 caracteres"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:["ðŸŒ™ Â¿Con quÃ© sensaciÃ³n cierras tu dÃ­a?",e.jsx("span",{className:"text-xs text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:l,onChange:u=>m(u.target.value),placeholder:"Ej: Tranquilo, Agradecido, Cansado pero satisfecho...",className:"w-full p-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent text-sm",maxLength:100})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-gradient-to-br from-pink-50 to-rose-50 rounded-xl border border-pink-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-pink-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-2",children:"ðŸ’­ ReflexiÃ³n final (opcional)"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Â¿QuÃ© agradeces de hoy aunque haya sido difÃ­cil?",e.jsx("br",{}),"Â¿QuÃ© aprendiste que no sabÃ­as ayer?"]})]})]})})]})}),e.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-100 px-6 py-4 rounded-b-3xl shadow-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c.button,{onClick:()=>s(),className:"px-6 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Saltar"}),e.jsx(c.button,{onClick:y,disabled:!h,className:`flex-1 py-3 rounded-xl font-semibold transition-all ${h?"bg-gradient-to-r from-indigo-400 to-purple-400 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,whileHover:h?{scale:1.02}:{},whileTap:h?{scale:.98}:{},children:"Cerrar mi dÃ­a ðŸŒ™"})]})})]})})}const la={apiKey:"AIzaSyCVIY7zq53TwD_GdNZqJvIKQr-yLsfSCjw",authDomain:"daylo-app-89843.firebaseapp.com",projectId:"daylo-app-89843",storageBucket:"daylo-app-89843.firebasestorage.app",messagingSenderId:"289095124470",appId:"1:289095124470:web:a6c73903a36d0dfb8ff3d7"},ca=ht(la),F=gt(ca),L=()=>localStorage.getItem("daylo-user-email")||"anonymous",Le=async s=>{try{const t=pe(F,"users",s),a=await He(t);if(a.exists()){const i=a.data();return{name:i.name,email:i.email}}return null}catch(t){return console.error("âŒ Error verificando usuario:",t),null}},Ve=async(s,t)=>{try{const a=pe(F,"users",t);await Fe(a,{name:s,email:t,createdAt:re.now(),updatedAt:re.now()},{merge:!0}),console.log("âœ… Usuario guardado en Firebase:",t)}catch(a){throw console.error("âŒ Error guardando usuario:",a),a}},da=async s=>{var t,a;try{const i=L();if(!i||i==="anonymous")throw console.error("âŒ No se puede guardar: Email de usuario no encontrado"),console.log("ðŸš¨ Por favor ingresa con tu email primero"),new Error("Email de usuario no encontrado");const o=new Date().toISOString().split("T")[0],r=`${i}_${o}`,n={...s,userEmail:i,date:s.date||new Date().toISOString(),updatedAt:re.now()};console.log("ðŸ’¾ INTENTANDO GUARDAR EN FIREBASE:"),console.log("ðŸ“ ColecciÃ³n: dailyEntries"),console.log("ðŸ†” Document ID:",r),console.log("ðŸ“§ User Email:",i),console.log("ðŸ“Š Datos:",{entryId:r,userEmail:i,activities:((t=s.activities)==null?void 0:t.length)||0,tasks:((a=s.tasks)==null?void 0:a.length)||0,emotionalCheckIn:s.emotionalCheckIn?"âœ…":"âŒ",dayIntention:s.dayIntention?"âœ…":"âŒ",diaryNote:s.diaryNote?"âœ…":"âŒ"}),await Fe(pe(F,"dailyEntries",r),n,{merge:!0}),console.log("âœ… Entrada guardada exitosamente en Firebase:",r)}catch(i){throw console.error("âŒ Error guardando en Firebase:",i),i}},Qe=async()=>{try{const s=L(),t=new Date().toISOString().split("T")[0],a=`${s}_${t}`,i=pe(F,"dailyEntries",a),o=await He(i);return o.exists()?o.data():null}catch(s){return console.error("âŒ Error obteniendo entrada de hoy:",s),null}},ua=async()=>{try{const s=L(),t=X(F,"dailyEntries"),a=ue(t,Q("userEmail","==",s),K("date","desc")),i=await me(a),o=[];return i.forEach(r=>{o.push(r.data())}),console.log(`âœ… ${o.length} entradas cargadas desde Firebase`),o}catch(s){return console.error("âŒ Error obteniendo entradas:",s),[]}},ma=async(s=7)=>{try{const t=L(),a=new Date;a.setDate(a.getDate()-s);const i=X(F,"dailyEntries"),o=ue(i,Q("userEmail","==",t),Q("date",">=",a.toISOString()),K("date","desc")),r=await me(o),n=[];return r.forEach(l=>{n.push(l.data())}),n}catch(t){return console.error("âŒ Error obteniendo entradas recientes:",t),[]}},pa=async s=>{try{const t=L(),a={...s,userEmail:t,timestamp:re.now()};await Oe(X(F,"activityHistory"),a),console.log("âœ… Activity log guardado en Firebase")}catch(t){throw console.error("âŒ Error guardando activity log:",t),t}},xa=async s=>{try{const t=L(),a={...s,userEmail:t,timestamp:re.now()};await Oe(X(F,"timeHistory"),a),console.log("âœ… Time log guardado en Firebase")}catch(t){throw console.error("âŒ Error guardando time log:",t),t}},ha=async(s=30)=>{try{const t=L(),a=new Date;a.setDate(a.getDate()-s);const i=X(F,"activityHistory"),o=ue(i,Q("userEmail","==",t),Q("date",">=",a.toISOString().split("T")[0]),K("date","desc"),K("timestamp","desc")),r=await me(o),n=[];return r.forEach(l=>{n.push({...l.data(),id:l.id})}),console.log(`âœ… ${n.length} activity logs cargados desde Firebase`),n}catch(t){return console.error("âŒ Error obteniendo historial de actividades:",t),[]}},ga=async(s=30)=>{try{const t=L(),a=new Date;a.setDate(a.getDate()-s);const i=X(F,"timeHistory"),o=ue(i,Q("userEmail","==",t),Q("date",">=",a.toISOString().split("T")[0]),K("date","desc"),K("timestamp","desc")),r=await me(o),n=[];return r.forEach(l=>{n.push({...l.data(),id:l.id})}),console.log(`âœ… ${n.length} time logs cargados desde Firebase`),n}catch(t){return console.error("âŒ Error obteniendo historial de tiempo:",t),[]}},ye=Object.freeze(Object.defineProperty({__proto__:null,createOrUpdateUser:Ve,getActivityHistory:ha,getAllUserEntries:ua,getRecentEntries:ma,getTimeHistory:ga,getTodayEntry:Qe,getUserByEmail:Le,saveActivityLog:pa,saveDailyEntry:da,saveTimeLog:xa},Symbol.toStringTag,{value:"Module"}));function ya(){const s=new Date().getHours();return s>=5&&s<12?"morning":s>=12&&s<19?"afternoon":"evening"}function fa(){const{selectedActivities:s,totalMinutes:t,currentEntry:a,addActivity:i,removeActivity:o,updateActivityDuration:r,updateActivityFacets:n,setModalOpen:l,completeCheckIn:m,checkAndResetIfNewDay:y,autoSave:h}=C(),[u,v]=p.useState(null),[x,j]=p.useState({}),[w,f]=p.useState(0),[b,k]=p.useState(""),[D,O]=p.useState("synced"),[S]=p.useState(ya()),[V,g]=p.useState([]),[E,H]=p.useState(!1),[G,R]=p.useState(!1),[B,oe]=p.useState(!1),[_,Z]=p.useState(!1),[M,ee]=p.useState("purpose");p.useEffect(()=>{(async()=>{if(y()){console.log("âœ¨ Inicio de nuevo dÃ­a - datos reseteados");return}if(s.length>0){console.log("â­ï¸ Store ya tiene datos, no recargar");return}const Ge=new Date().toISOString().split("T")[0],T=JSON.parse(localStorage.getItem("daylo-entries")||"[]").find(q=>new Date(q.date).toISOString().split("T")[0]===Ge);if(T){if(console.log("ðŸ“¦ Cargando desde localStorage:",T),T.activities&&T.activities.length>0&&T.activities.forEach(q=>{i(q)}),T.tasks&&T.tasks.length>0){const{currentEntry:q}=C.getState();C.setState({currentEntry:{...q,tasks:T.tasks}}),console.log("âœ… Tareas cargadas:",T.tasks.length)}T.diaryNote&&C.getState().setDiaryNote(T.diaryNote),T.emotionalCheckIn&&C.getState().setEmotionalCheckIn(T.emotionalCheckIn),T.dayIntention&&C.getState().setDayIntention(T.dayIntention),T.dayStory&&C.getState().setDayStory(T.dayStory)}try{const q=await Qe();q&&q.activities&&console.log("â˜ï¸ Firebase sincronizado")}catch{console.log("âš ï¸ Firebase no disponible, usando datos locales")}})();const N=new Date().toISOString().split("T")[0];localStorage.getItem("daylo-last-checkin")!==N&&setTimeout(()=>{H(!0),l(!0)},1e3)},[]);const ie=d=>{const N=s.find(W=>W.icon===d.id),I=Ut(d.id);g(I),N?(v(d),j(N.facets||{}),f(N.duration),k(N.notes||"")):(v(d),j({}),f(d.defaultDuration),k("")),l(!0)},ne=async()=>{if(!u||_)return;const d=s.find(P=>P.icon===u.id),N=1440;let I=t;if(d?I=t-d.duration+w:I=t+w,console.log("ðŸ” ValidaciÃ³n 24h:",{totalActual:t,duracionAnterior:(d==null?void 0:d.duration)||0,duracionNueva:w,totalNuevo:I,excede:I>N}),I>N){oe(!0);return}Z(!0),O("syncing");try{d?(r(d.id,w),n(d.id,x,b)):i({id:Date.now().toString(),icon:u.id,label:u.label,duration:w,color:u.color,facets:x,notes:b}),await new Promise(P=>setTimeout(P,100)),await h(),O("synced"),console.log("âœ… Actividad guardada en Firebase"),v(null),l(!1),j({}),k("")}catch(P){console.error("âŒ Error guardando:",P),O("offline")}finally{Z(!1)}},le=async()=>{if(!u)return;const d=s.find(N=>N.icon===u.id);d&&(o(d.id),await new Promise(N=>setTimeout(N,100)),await h(),console.log("âœ… Actividad eliminada y guardado en Firebase")),v(null),l(!1)},ce=V,te=S==="morning"?{title:"ðŸŒ… Â¡Buenos dÃ­as!",subtitle:"Comienza tu dÃ­a con intenciÃ³n"}:S==="afternoon"?{title:"Â¿CÃ³mo va tu dÃ­a?",subtitle:"Registra lo que has vivido"}:{title:"ðŸŒ™ Reflexiona sobre tu dÃ­a",subtitle:"Un momento para cerrar el dÃ­a conscientemente"};return e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"daylo-card text-center",children:[e.jsx(c.h2,{className:"text-2xl font-bold text-gray-800 mb-2",animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0},children:te.title}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center justify-center gap-2",children:[te.subtitle,D==="synced"&&e.jsxs("span",{className:"text-green-600 flex items-center gap-1 text-xs",children:[e.jsx(Se,{size:14})," Sincronizado"]}),D==="syncing"&&e.jsxs(c.span,{className:"text-blue-600 flex items-center gap-1 text-xs",animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:[e.jsx(Se,{size:14})," Guardando..."]}),D==="offline"&&e.jsxs("span",{className:"text-orange-600 flex items-center gap-1 text-xs",children:[e.jsx(lt,{size:14})," Sin conexiÃ³n"]})]})]}),!1,e.jsx(A,{children:E&&e.jsx(ia,{isNewUser:!localStorage.getItem("daylo-onboarding-complete"),onComplete:()=>{H(!1),l(!1),m(),localStorage.getItem("daylo-onboarding-complete")||localStorage.setItem("daylo-onboarding-complete","true"),h()}})}),e.jsx(A,{children:G&&e.jsx(na,{onComplete:()=>{R(!1),l(!1),h()}})}),e.jsx(A,{children:B&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:e.jsxs(c.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:d=>d.stopPropagation(),className:"bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(c.div,{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:e.jsx(ct,{className:"w-10 h-10 text-orange-600",strokeWidth:2.5})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:"â° Superaste las 24 horas"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-2",children:(()=>{const d=s.find(I=>I.icon===(u==null?void 0:u.id)),N=d?t-d.duration+w:t+w;return e.jsxs(e.Fragment,{children:["EstÃ¡s intentando registrar ",e.jsxs("span",{className:"font-semibold text-orange-600",children:[Math.floor(N/60),"h ",N%60,"min"]})," en total."]})})()}),e.jsx("p",{className:"text-xs text-gray-500 text-center mb-6",children:"Un dÃ­a tiene solo 24 horas. Ajusta la duraciÃ³n de esta actividad o elimina otra para continuar."}),e.jsx(c.button,{onClick:()=>{oe(!1)},className:"w-full py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"âœ“ Entendido, voy a ajustar"})]})})}),a.dayIntention&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-4 border-2 border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âœ¨"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 font-semibold mb-1",children:"Tu intenciÃ³n de hoy"}),e.jsx("p",{className:"text-sm text-gray-800",children:a.dayIntention})]})]})}),S==="evening"&&s.length===0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-2xl p-5 border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’š"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-2",children:"No pasa nada si hoy no registraste actividades"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Los dÃ­as de descanso tambiÃ©n cuentan. Â¿QuÃ© SÃ hiciste hoy, aunque parezca pequeÃ±o?"})]})]})}),(()=>{var P;const d=new Date().getHours(),N=d>=20&&d<23,I=s.length>0,W=!((P=a.dayStory)!=null&&P.mostSignificant);return S==="evening"&&N&&I&&W?e.jsx(c.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 rounded-2xl p-5 border-2 border-indigo-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(c.span,{className:"text-3xl",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"ðŸŒ™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Â¿Tomas un momento para cerrar tu dÃ­a?"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Reflexionar antes de dormir te ayuda a procesar lo vivido y descansar mejor"}),e.jsx(c.button,{onClick:()=>{R(!0),l(!0)},className:"w-full py-3 bg-gradient-to-r from-indigo-400 to-purple-400 text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"âœ¨ SÃ­, cerrar mi dÃ­a ahora"})]})]})}):S==="evening"&&I&&W&&!N?e.jsx(c.button,{onClick:()=>{R(!0),l(!0)},className:"w-full py-4 bg-gradient-to-r from-indigo-400 to-purple-400 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:"ðŸŒ™ Cerrar mi dÃ­a con reflexiÃ³n"}):null})(),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border-2 border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[e.jsxs("button",{onClick:()=>ee("purpose"),className:`flex-1 py-4 px-6 font-semibold transition-all relative ${M==="purpose"?"text-purple-700 bg-purple-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(dt,{size:20}),e.jsx("span",{children:"Intenciones"})]}),M==="purpose"&&e.jsx(c.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 to-pink-500",transition:{type:"spring",stiffness:500,damping:30}})]}),e.jsxs("button",{onClick:()=>ee("activities"),className:`flex-1 py-4 px-6 font-semibold transition-all relative ${M==="activities"?"text-blue-700 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ut,{size:20}),e.jsx("span",{children:"Mi DÃ­a"}),s.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:s.length})]}),M==="activities"&&e.jsx(c.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-teal-500",transition:{type:"spring",stiffness:500,damping:30}})]})]}),e.jsx(A,{mode:"wait",children:M==="purpose"?e.jsx(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"p-6",children:e.jsx(sa,{})},"purpose"):e.jsx(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Wt.map((d,N)=>e.jsx(c.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:N*.05},children:e.jsx(Xt,{activity:d,isSelected:s.some(I=>I.icon===d.id),onToggle:()=>ie(d)})},d.id))}),s.length>0&&e.jsxs(c.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 pt-4 border-t border-gray-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-semibold text-gray-600",children:[s.length," ",s.length===1?"actividad":"actividades"]}),e.jsxs("span",{className:`text-xl font-bold ${t>1440?"text-red-600":t>1200?"text-orange-600":"text-purple-600"}`,children:[Math.floor(t/60),"h ",t%60,"m"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"ðŸ•’ Registrado"}),e.jsxs("span",{className:`font-semibold ${t>1440?"text-red-600":"text-purple-600"}`,children:[Math.floor(t/60),"h ",t%60,"m / 24h"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx(c.div,{className:"h-full rounded-full",style:{width:`${Math.min(t/1440*100,100)}%`,background:t>1440?"linear-gradient(90deg, #ef4444, #dc2626)":"linear-gradient(90deg, #a855f7, #ec4899)"},initial:{width:0},animate:{width:`${Math.min(t/1440*100,100)}%`},transition:{duration:.5,ease:"easeOut"}})}),t>1440&&e.jsx(c.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-xs text-red-600 mt-1.5 font-medium",children:"âš ï¸ Has excedido las 24 horas del dÃ­a"})]})]})]})]})},"activities")})]}),e.jsx(ea,{isOpen:!!u,onClose:()=>{v(null),l(!1)},color:(u==null?void 0:u.color)||"#C4E5FF",title:(u==null?void 0:u.label)||"",children:e.jsxs("div",{className:"space-y-6 px-6 py-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"â±ï¸ Â¿CuÃ¡nto tiempo dedicaste?"}),e.jsx(Zt,{label:"",value:w,onChange:f,color:(u==null?void 0:u.color)||"#C4E5FF",max:720})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"ðŸ’­ CuÃ©ntanos mÃ¡s sobre esta actividad"}),e.jsx("div",{className:"space-y-4",children:ce.map((d,N)=>e.jsx(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.1},children:d.type==="rating"?e.jsx(ta,{emoji:d.emoji,label:d.label,value:x[d.id]||0,onChange:I=>j({...x,[d.id]:I}),color:(u==null?void 0:u.color)||"#C4E5FF"}):e.jsx(aa,{emoji:d.emoji,label:d.label,value:x[d.id],onChange:I=>j({...x,[d.id]:I}),color:(u==null?void 0:u.color)||"#C4E5FF"})},d.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:"ðŸ“ Notas adicionales (opcional)"}),e.jsx("textarea",{value:b,onChange:d=>k(d.target.value),placeholder:"Algo especÃ­fico que quieras recordar...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-pastel-purple focus:outline-none resize-none",rows:3,maxLength:150}),e.jsxs("div",{className:"text-xs text-gray-400 text-right mt-1",children:[b.length,"/150"]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white to-white/95 pt-6 pb-4 px-6 border-t-2 border-gray-200 shadow-2xl z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex gap-3",children:[s.some(d=>d.icon===(u==null?void 0:u.id))&&e.jsx(c.button,{onClick:le,disabled:_,className:"px-6 py-4 rounded-full font-bold text-base bg-red-100 text-red-600 hover:bg-red-200 transition-colors flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",whileHover:_?{}:{scale:1.05},whileTap:_?{}:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:"Borrar"}),e.jsx(c.button,{onClick:ne,disabled:_,className:"flex-1 py-5 rounded-full font-bold text-xl flex items-center justify-center gap-3 shadow-2xl border-2 border-white disabled:opacity-70 disabled:cursor-not-allowed relative overflow-hidden",style:{background:`linear-gradient(135deg, ${u==null?void 0:u.color}, ${u==null?void 0:u.color}DD)`,color:"#1F2937"},whileHover:_?{}:{scale:1.05,y:-2},whileTap:_?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:_?e.jsxs(e.Fragment,{children:[e.jsx(c.div,{className:"w-6 h-6 border-3 border-gray-800 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-6 h-6"}),e.jsx("span",{children:s.some(d=>d.icon===(u==null?void 0:u.id))?"Actualizar":"Guardar"})]})})]})})]})}),e.jsx(ra,{timeContext:S})]})}function ba(){const s=C(a=>a.isModalOpen),t=[{path:"/hoy",icon:Ae,label:"Hoy"},{path:"/dashboard",icon:mt,label:"Dashboard"},{path:"/perfil",icon:$e,label:"Perfil"}];return e.jsx(A,{children:!s&&e.jsx(c.nav,{initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-lg bg-white/80 border-t border-white/50 shadow-lg",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4",children:e.jsx("div",{className:"flex items-center justify-around py-3",children:t.map(a=>e.jsx(Je,{to:a.path,className:({isActive:i})=>`flex flex-col items-center gap-1 px-6 py-2 rounded-2xl transition-all ${i?"bg-gradient-to-r from-pastel-pink to-pastel-purple":"hover:bg-gray-100"}`,children:({isActive:i})=>e.jsxs(e.Fragment,{children:[e.jsx(c.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(a.icon,{size:24,strokeWidth:i?2.5:2,color:i?"#374151":"#9CA3AF"})}),e.jsx("span",{className:`text-xs font-semibold ${i?"text-gray-700":"text-gray-500"}`,children:a.label})]})},a.path))})})})})}function va(s){let t=0;for(let i=0;i<s.length;i++)t=s.charCodeAt(i)+((t<<5)-t);const a=Math.abs(t%360);return{primary:`hsl(${a}, 70%, 50%)`,secondary:`hsl(${(a+60)%360}, 75%, 55%)`,accent:`hsl(${(a+120)%360}, 80%, 60%)`,bg:`hsl(${(a+180)%360}, 60%, 92%)`}}function ja(s){const t=["gradient","geometric","pixel","stripe"],a=s.charCodeAt(0)%t.length;return t[a]}function wa(s){const t=s.trim().split(" ");return t.length>=2?(t[0][0]+t[t.length-1][0]).toUpperCase():s.slice(0,2).toUpperCase()}function Na(s,t,a){if(s==="gradient")return`
      <circle cx="60" cy="60" r="60" fill="url(#mainGradient)"/>
      <circle cx="45" cy="45" r="25" fill="${t.accent}" opacity="0.15"/>
      <circle cx="80" cy="75" r="20" fill="${t.secondary}" opacity="0.12"/>
    `;if(s==="geometric"){const i=a.split("").reduce((r,n)=>r+n.charCodeAt(0),0);let o=`<circle cx="60" cy="60" r="60" fill="${t.bg}"/>`;for(let r=0;r<6;r++){const n=i*(r+1)%80+20,l=i*(r+2)%80+20,m=i*(r+3)%12+8,y=r%2===0?t.primary:t.secondary;o+=`<circle cx="${n}" cy="${l}" r="${m}" fill="${y}" opacity="0.15"/>`}return o}else if(s==="pixel"){const i=a.split("").reduce((r,n)=>r+n.charCodeAt(0),0);let o=`<rect width="120" height="120" fill="${t.bg}"/>`;for(let r=0;r<8;r++)for(let n=0;n<8;n++){const l=r*8+n;i>>l&1&&(o+=`<rect x="${n*15}" y="${r*15}" width="15" height="15" fill="${t.primary}" opacity="0.2" rx="2"/>`)}return o}else return`
      <rect width="120" height="120" fill="${t.bg}"/>
      <rect x="0" y="15" width="120" height="15" fill="${t.primary}" opacity="0.15"/>
      <rect x="0" y="45" width="120" height="15" fill="${t.secondary}" opacity="0.12"/>
      <rect x="0" y="75" width="120" height="15" fill="${t.accent}" opacity="0.1"/>
    `}function Sa({name:s,email:t,size:a=120}){const i=va(s+t),o=ja(s),r=wa(s);let n=`<svg width="${a}" height="${a}" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" style="border-radius: 50%;">`;return n+=`
    <defs>
      <linearGradient id="mainGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:${i.primary};stop-opacity:0.9" />
        <stop offset="100%" style="stop-color:${i.secondary};stop-opacity:0.7" />
      </linearGradient>
      <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:white;stop-opacity:1" />
        <stop offset="100%" style="stop-color:white;stop-opacity:0.9" />
      </linearGradient>
    </defs>
  `,n+=Na(o,i,t),n+='<circle cx="60" cy="60" r="35" fill="white" opacity="0.25"/>',n+=`
    <text 
      x="60" 
      y="60" 
      text-anchor="middle" 
      dominant-baseline="central" 
      font-family="system-ui, -apple-system, sans-serif" 
      font-size="32" 
      font-weight="700" 
      fill="url(#textGradient)"
      style="text-shadow: 0 2px 4px rgba(0,0,0,0.1);"
    >${r}</text>
  `,n+='<circle cx="60" cy="60" r="58" fill="none" stroke="white" stroke-width="2.5" opacity="0.4"/>',n+="</svg>",n}function Ea({name:s,email:t,size:a=120,className:i=""}){const o=Sa({name:s,email:t,size:a});return e.jsx("div",{className:`inline-block rounded-full overflow-hidden shadow-lg ${i}`,style:{width:a,height:a},dangerouslySetInnerHTML:{__html:o}})}function Ia(){const[s,t]=p.useState(!1),[a,i]=p.useState(!1),[o,r]=p.useState(""),[n,l]=p.useState(""),[m,y]=p.useState(""),[h,u]=p.useState(!1),[v,x]=p.useState(""),j=()=>{window.confirm("Â¿Cerrar sesiÃ³n?")&&(sessionStorage.setItem("daylo-just-logged-out","true"),U(async()=>{const{useDayloStore:f}=await Promise.resolve().then(()=>Bt);return{useDayloStore:f}},void 0).then(({useDayloStore:f})=>{f.getState().resetStore()}),localStorage.removeItem("daylo-user-name"),localStorage.removeItem("daylo-user-email"),localStorage.removeItem("daylo-entries"),localStorage.removeItem("daylo-last-checkin"),localStorage.removeItem("daylo-activity-history"),localStorage.removeItem("daylo-time-history"),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),window.location.href=window.location.pathname,window.location.reload())};p.useEffect(()=>{const f=localStorage.getItem("daylo-user-name"),b=localStorage.getItem("daylo-user-email"),k=sessionStorage.getItem("daylo-just-logged-out");f&&b?r(f):(t(!0),k==="true"&&(i(!0),sessionStorage.removeItem("daylo-just-logged-out")))},[]);const w=async()=>{if(!n.trim()||!m.trim()){x("Por favor completa todos los campos");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){x("Por favor ingresa un correo vÃ¡lido");return}u(!0),x("");try{const b=await Le(m.trim());b?(localStorage.setItem("daylo-user-name",b.name),localStorage.setItem("daylo-user-email",b.email),r(b.name),t(!1),console.log("âœ… Usuario existente cargado:",b.email),setTimeout(()=>{alert(`Â¡Bienvenido de vuelta, ${b.name}! ðŸŽ‰
Hemos cargado tus datos.`)},500)):(await Ve(n.trim(),m.trim()),localStorage.setItem("daylo-user-name",n.trim()),localStorage.setItem("daylo-user-email",m.trim()),r(n.trim()),t(!1),console.log("âœ… Nuevo usuario registrado:",m.trim()))}catch(b){console.error("Error al verificar usuario:",b),x("Error al conectar. Intenta nuevamente.")}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx(c.header,{initial:{y:-100},animate:{y:0},className:"sticky top-0 z-50 backdrop-blur-lg bg-white/70 border-b border-white/50 shadow-sm",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[o?e.jsx(c.div,{whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.3},children:e.jsx(Ea,{name:o,email:localStorage.getItem("daylo-user-email")||"",size:44,className:"shadow-lg cursor-pointer"})}):e.jsx(c.div,{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pastel-pink to-pastel-purple flex items-center justify-center shadow-lg",whileHover:{scale:1.1,rotate:360},transition:{duration:.5},children:e.jsx("span",{className:"text-2xl",children:"âœ¨"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"Daylo"}),o&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Hola, ",o,"! ðŸ‘‹"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c.div,{className:"text-sm text-gray-600 hidden sm:block",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:new Date().toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})}),o&&!s&&e.jsx(c.button,{onClick:j,className:"p-2 rounded-full hover:bg-red-50 text-gray-500 hover:text-red-600 transition-colors group",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Cerrar sesiÃ³n",children:e.jsx(pt,{className:"w-5 h-5"})})]})]})})}),e.jsx("main",{className:"max-w-2xl mx-auto px-4 py-6",children:e.jsx(Ue,{})}),e.jsx(ba,{}),e.jsx(A,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsx(c.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",children:[e.jsx(c.div,{className:"absolute -top-10 left-1/2 transform -translate-x-1/2",animate:{y:[0,-10,0],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pastel-pink to-pastel-purple flex items-center justify-center shadow-xl",children:e.jsx("span",{className:"text-4xl",children:"âœ¨"})})}),e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:a?"Â¡Hasta pronto! ðŸ‘‹":"Â¡Bienvenido a Daylo!"}),e.jsx("p",{className:"text-gray-600",children:a?"Gracias por usar Daylo. Â¿Quieres ingresar con otro usuario?":"Tu diario personal en la nube"})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Â¿CÃ³mo te llamas?"}),e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:n,onChange:f=>l(f.target.value),onKeyPress:f=>{var b;return f.key==="Enter"&&((b=document.getElementById("email-input"))==null?void 0:b.focus())},placeholder:"Tu nombre",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-pastel-purple focus:outline-none transition-colors text-lg",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Â¿CuÃ¡l es tu correo?"}),e.jsxs("div",{className:"relative",children:[e.jsx(xt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{id:"email-input",type:"email",value:m,onChange:f=>{y(f.target.value),x("")},onKeyPress:f=>f.key==="Enter"&&w(),placeholder:"tu@correo.com",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-pastel-purple focus:outline-none transition-colors text-lg"})]})]}),v&&e.jsx(c.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center",children:v}),e.jsx(c.button,{onClick:w,disabled:!n.trim()||!m.trim()||h,className:"w-full py-4 rounded-2xl font-bold text-lg bg-gradient-to-r from-pastel-pink to-pastel-purple text-gray-800 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:n.trim()&&m.trim()&&!h?1.02:1},whileTap:{scale:n.trim()&&m.trim()&&!h?.98:1},children:h?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(c.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"â³"}),"Verificando..."]}):a?"ðŸ” Ingresar con otro usuario":"âœ¨ Comenzar"})]}),a&&e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-purple-50 rounded-xl text-center",children:e.jsx("p",{className:"text-sm text-purple-700",children:"ðŸ’œ Tu sesiÃ³n se cerrÃ³ correctamente"})}),e.jsx("p",{className:"mt-6 text-xs text-center text-gray-500",children:"Tus datos se guardan de forma segura en Firebase"})]})})]})}),"    "]})}const ka=p.lazy(()=>U(()=>import("./Dashboard-DGIYabs6.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ta=p.lazy(()=>U(()=>import("./Profile-BwAkr39c.js"),__vite__mapDeps([6,1,2,3,5])));function Da(){return e.jsx(Ke,{children:e.jsx(Ye,{children:e.jsxs(ae,{path:"/",element:e.jsx(Ia,{}),children:[e.jsx(ae,{index:!0,element:e.jsx(Xe,{to:"/hoy",replace:!0})}),e.jsx(ae,{path:"hoy",element:e.jsx(fa,{})}),e.jsx(ae,{path:"dashboard",element:e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando..."})]})}),children:e.jsx(ka,{})})}),e.jsx(ae,{path:"perfil",element:e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando..."})]})}),children:e.jsx(Ta,{})})})]})})})}fe.createRoot(document.getElementById("root")).render(e.jsx(Ce.StrictMode,{children:e.jsx(Da,{})}));export{Yt as A,ha as a,Ea as b,de as f,ua as g,C as u};
